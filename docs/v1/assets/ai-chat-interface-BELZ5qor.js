import{r as T,i as $,x as i,E}from"./iframe-CupD09ex.js";import{t as H}from"./custom-element-C028faeO.js";import{r as L}from"./state-DZMgFiNl.js";import{n as R}from"./query-assigned-nodes-cwDSNLIu.js";import{n as W}from"./when-3fO0zp9C.js";import"./ai-empty-state-B4bO-Hd6.js";import"./ai-gradient-container-CGvaud5b.js";const q=`/**
 * @license
 * Copyright Tyler Technologies, Inc. 
 * License: Apache-2.0
 */:host{display:block;height:100%;flex-grow:1}.ai-chat-interface{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--forge-typography-body1-font-family, var(--forge-typography-font-family, "Roboto", sans-serif));font-size:var(--forge-typography-body1-font-size, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-body-font-size-scale, .875)));font-weight:var(--forge-typography-body1-font-weight, 400);line-height:var(--forge-typography-body1-line-height, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-body-line-height-scale, 1.125)));letter-spacing:var(--forge-typography-body1-letter-spacing, .0357142857em);text-transform:var(--forge-typography-body1-text-transform, inherit);text-decoration:var(--forge-typography-body1-text-decoration, inherit);color:var(--forge-theme-on-surface, #000000);display:flex;flex-direction:column;height:100%}.messages-container::-webkit-scrollbar{height:var(--forge-scrollbar-height, 16px);width:var(--forge-scrollbar-width, 16px)}.messages-container::-webkit-scrollbar-track{background-color:var(--forge-scrollbar-track-container, var(--forge-theme-surface-container-low, #ebebeb))}.messages-container::-webkit-scrollbar-track:hover{background-color:var(--forge-scrollbar-track-container-hover, var(--forge-theme-surface-container-low, #ebebeb))}.messages-container::-webkit-scrollbar-corner{background-color:var(--forge-scrollbar-track-container, var(--forge-theme-surface-container-low, #ebebeb))}.messages-container::-webkit-scrollbar-thumb{height:var(--forge-scrollbar-thumb-min-height, 32px);width:var(--forge-scrollbar-thumb-min-width, 32px);border-radius:var(--forge-scrollbar-border-radius, calc(var(--forge-shape-full, 9999px) * var(--forge-shape-factor, 1)));border-width:var(--forge-scrollbar-border-width, 3px);border-style:solid;border-color:transparent;background-color:var(--forge-scrollbar-thumb-container, var(--forge-theme-surface-container-medium, #c2c2c2));background-clip:content-box}.messages-container::-webkit-scrollbar-thumb:hover{background-color:var(--forge-scrollbar-thumb-container-hover, var(--forge-theme-surface-container-high, #9e9e9e))}.messages-container{padding-inline-start:var(--forge-spacing-medium, 16px);padding-block-end:var(--forge-spacing-medium, 16px);scrollbar-gutter:stable;scroll-behavior:smooth;overflow-y:auto}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.messages-container{overflow-y:scroll}}}.messages-container{background:linear-gradient(to top,var(--forge-theme-primary-container-minimum, #f7f8fc),var(--forge-theme-surface, #ffffff));border-block-end:1px solid var(--forge-theme-outline, #e0e0e0);display:flex;flex-direction:column;flex-grow:1;gap:var(--forge-spacing-medium, 16px)}.suggestions-container{padding-inline:var(--forge-spacing-medium, 16px);padding-block-start:var(--forge-spacing-medium, 16px)}.prompt-container{padding:var(--forge-spacing-medium, 16px)}`;var U=Object.defineProperty,B=Object.getOwnPropertyDescriptor,_=e=>{throw TypeError(e)},m=(e,t,r,o)=>{for(var l=o>1?void 0:o?B(t,r):t,p=e.length-1,d;p>=0;p--)(d=e[p])&&(l=(o?d(t,r,l):d(l))||l);return o&&l&&U(t,r,l),l},y=(e,t,r)=>t.has(e)||_("Cannot "+r),n=(e,t,r)=>(y(e,t,"read from private field"),r?r.call(e):t.get(e)),c=(e,t,r)=>t.has(e)?_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),a=(e,t,r)=>(y(e,t,"access private method"),r),u,f,s,w,v,k,b,x,h,S,O,C,z,M,A;const N="forge-ai-chat-interface";let g=class extends ${constructor(){super(...arguments),c(this,s),this._hasMessages=!1,this._resizeObserver=null,this._mutationObserver=null,this._userHasScrolledUp=!1,this._isScrollEventListenerAdded=!1,c(this,u,i`<slot name="header" @slotchange=${a(this,s,h)}></slot>`),c(this,f,i`<slot name="suggestions" @slotchange=${a(this,s,h)}></slot>`),c(this,v,i`<slot name="prompt" @slotchange=${a(this,s,h)}></slot>`),c(this,b,i`<slot @slotchange=${a(this,s,h)}></slot>`)}scrollMessagesToBottom(){const e=this.shadowRoot?.querySelector(".messages-container");if(!e)return;const t=e.scrollHeight>e.clientHeight;if(!t){e.scrollTop=e.scrollHeight;return}t&&!this._isScrollEventListenerAdded&&a(this,s,M).call(this,e),e.scrollTop+e.clientHeight>=e.scrollHeight-5&&(this._userHasScrolledUp=!1),this._userHasScrolledUp||(e.scrollTop=e.scrollHeight)}firstUpdated(){a(this,s,S).call(this),a(this,s,C).call(this)}disconnectedCallback(){super.disconnectedCallback(),a(this,s,O).call(this),a(this,s,z).call(this),a(this,s,A).call(this)}render(){return i`
      <div class="ai-chat-interface">
        ${n(this,u)} ${n(this,s,x)} ${n(this,s,w)}
        <div class="prompt-container">${n(this,s,k)}</div>
      </div>
    `}};u=new WeakMap;f=new WeakMap;s=new WeakSet;w=function(){const e=this._slottedSuggestionsNodes.length>0;return W(e,()=>i`<div class="suggestions-container">${n(this,f)}</div>`,()=>n(this,f))};v=new WeakMap;k=function(){return n(this,v)};b=new WeakMap;x=function(){return i`
      <div class="messages-container">
        ${n(this,b)} ${this._hasMessages?E:i`<forge-ai-empty-state></forge-ai-empty-state>`}
      </div>
    `};h=function(e){const t=e.target.name||"default";if(t==="default"){const o=e.target.assignedElements();this._hasMessages=o.length>0}["header","suggestions","prompt","default"].includes(t)&&this.requestUpdate()};S=function(){const e=this.shadowRoot?.querySelector(".messages-container");e&&(this._resizeObserver=new ResizeObserver(()=>{requestAnimationFrame(()=>{this.scrollMessagesToBottom()})}),this._resizeObserver.observe(e))};O=function(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)};C=function(){this._mutationObserver=new MutationObserver(()=>{requestAnimationFrame(()=>{this.scrollMessagesToBottom()})}),this._mutationObserver.observe(this,{childList:!0,subtree:!0,attributes:!1,characterData:!0})};z=function(){this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=null)};M=function(e){let t=e.scrollTop;const r=()=>{const o=e.scrollTop;o<t&&(this._userHasScrolledUp=!0),t=o};e.addEventListener("scroll",r,{passive:!0}),this._isScrollEventListenerAdded=!0};A=function(){const e=this.shadowRoot?.querySelector(".messages-container");e&&this._isScrollEventListenerAdded&&(e.replaceWith(e.cloneNode(!0)),this._isScrollEventListenerAdded=!1)};g.styles=T(q);m([R({slot:"suggestions",flatten:!0})],g.prototype,"_slottedSuggestionsNodes",2);m([L()],g.prototype,"_hasMessages",2);g=m([H(N)],g);
