import{r as Q,i as G,x as Y}from"./iframe-DRrdbGcc.js";import{t as Z}from"./custom-element-UsVr97OX.js";import{n as F}from"./property-CRatXcNh.js";import{r as W}from"./state-DB8zZvfK.js";import{n as J}from"./when-CI7b_ccM.js";import{e as M,n as X}from"./ref-BA4WsFZe.js";import"./ai-modal-DEEeFng5.js";class j{constructor(o,e){this._isDragging=!1,this._currentTransformX=0,this._currentTransformY=0,this._dragOffsetX=0,this._dragOffsetY=0,this.handlePointerDown=i=>{if(i.button!==0)return;i.preventDefault();const r=this._options.targetElementRef.value,s=this._options.dragHandleRef.value;if(!r||!s)return;s.setPointerCapture(i.pointerId),this._getCurrentTransform(r);const a=r.getBoundingClientRect();this._dragOffsetX=i.clientX-a.left,this._dragOffsetY=i.clientY-a.top,this._isDragging=!0,this._host.requestUpdate(),this._addDragListeners()},this.handleKeyDown=i=>{const r=this._options.keyboardStep;let s=0,a=0;switch(i.key){case"ArrowUp":a=-r;break;case"ArrowDown":a=r;break;case"ArrowLeft":s=-r;break;case"ArrowRight":s=r;break;default:return}i.preventDefault();const f=this._options.targetElementRef.value;if(!f)return;this._getCurrentTransform(f);const m=this._currentTransformX+s,b=this._currentTransformY+a;if(this._options.constrainKeyboardNavigation){const v=this._constrainToViewport(f,m,b);this._currentTransformX=v.x,this._currentTransformY=v.y}else this._currentTransformX=m,this._currentTransformY=b;f.style.transform=`translate(${this._currentTransformX}px, ${this._currentTransformY}px)`},this._handlePointerMove=i=>{if(!this._isDragging)return;i.preventDefault();const r=this._options.targetElementRef.value;if(!r)return;const s=i.clientX-this._dragOffsetX,a=i.clientY-this._dragOffsetY,{originalX:f,originalY:m}=this._getOriginalPosition(r),b=s-f,v=a-m;this._currentTransformX=b,this._currentTransformY=v,r.style.transform=`translate(${b}px, ${v}px)`},this._handlePointerUp=i=>{if(!this._isDragging)return;i.preventDefault();const r=this._options.dragHandleRef.value;r&&r.releasePointerCapture(i.pointerId),this._options.snapToViewport&&this._snapToViewport(),this._isDragging=!1,this._host.requestUpdate(),this._removeDragListeners()},this._host=o,this._options={snapToViewport:!0,constrainKeyboardNavigation:!0,keyboardStep:10,snapAnimationDuration:200,allowOutOfBounds:!0,...e},o.addController(this)}hostConnected(){}hostDisconnected(){this.cleanup()}get isDragging(){return this._isDragging}get currentTransform(){return{x:this._currentTransformX,y:this._currentTransformY}}resetPosition(){const o=this._options.targetElementRef.value;o&&(o.style.transform="",o.style.transition="",this._currentTransformX=0,this._currentTransformY=0,this._dragOffsetX=0,this._dragOffsetY=0)}cleanup(){this._removeDragListeners(),this._isDragging=!1}_snapToViewport(){const o=this._options.targetElementRef.value;if(!o)return;const e=this._constrainToViewport(o,this._currentTransformX,this._currentTransformY);(e.x!==this._currentTransformX||e.y!==this._currentTransformY)&&(this._currentTransformX=e.x,this._currentTransformY=e.y,o.style.transition=`transform ${this._options.snapAnimationDuration}ms cubic-bezier(0.2, 0, 0, 1)`,o.style.transform=`translate(${e.x}px, ${e.y}px)`,setTimeout(()=>{o&&(o.style.transition="")},this._options.snapAnimationDuration))}_constrainToViewport(o,e,i){const r=o.offsetWidth,s=o.offsetHeight,{originalX:a,originalY:f}=this._getOriginalPosition(o),m=window.innerWidth-r-a,b=-a,v=window.innerHeight-s-f,B=-f,I=Math.max(b,Math.min(e,m)),N=Math.max(B,Math.min(i,v));return{x:I,y:N}}_getOriginalPosition(o){const e=o.offsetWidth,i=o.offsetHeight,r=window.getComputedStyle(o),s=parseFloat(r.right)?window.innerWidth-parseFloat(r.right)-e:parseFloat(r.left)||0,a=parseFloat(r.bottom)?window.innerHeight-parseFloat(r.bottom)-i:parseFloat(r.top)||0;return{originalX:s,originalY:a}}_getCurrentTransform(o){const e=o.style.transform;if(this._currentTransformX=0,this._currentTransformY=0,e){const i=e.match(/translate\((-?\d+(?:\.\d+)?)px,\s*(-?\d+(?:\.\d+)?)px\)/);i&&(this._currentTransformX=parseFloat(i[1]),this._currentTransformY=parseFloat(i[2]))}}_addDragListeners(){this._dragAbortController||(this._dragAbortController=new AbortController,document.addEventListener("pointermove",this._handlePointerMove,{signal:this._dragAbortController.signal}),document.addEventListener("pointerup",this._handlePointerUp,{signal:this._dragAbortController.signal}))}_removeDragListeners(){this._dragAbortController&&(this._dragAbortController.abort(),this._dragAbortController=void 0)}}const oo='.forge-icon-button{--_icon-button-display: var(--forge-icon-button-display, inline-flex);--_icon-button-size: var(--forge-icon-button-size, 48px);--_icon-button-gap: var(--forge-icon-button-gap, 0);--_icon-button-icon-color: var(--forge-icon-button-icon-color, currentColor);--_icon-button-background-color: var(--forge-icon-button-background-color, none);--_icon-button-icon-size: var(--forge-icon-button-icon-size, calc(var(--forge-typography-font-size, 1rem) * 1.5));--_icon-button-cursor: var(--forge-icon-button-cursor, pointer);--_icon-button-padding: var(--forge-icon-button-padding, var(--forge-spacing-xxsmall, 4px));--_icon-button-border: var(--forge-icon-button-border, none);--_icon-button-shadow: var(--forge-icon-button-shadow, none);--_icon-button-transition-duration: var(--forge-icon-button-transition-duration, var(--forge-animation-duration-short3, .15s));--_icon-button-transition-timing: var(--forge-icon-button-transition-timing, var(--forge-animation-easing-standard, cubic-bezier(.2, 0, 0, 1)));--_icon-button-shape: var(--forge-icon-button-shape, calc(var(--forge-shape-full, 9999px) * var(--forge-shape-factor, 1)));--_icon-button-shape-start-start: var(--forge-icon-button-shape-start-start, var(--_icon-button-shape));--_icon-button-shape-start-end: var(--forge-icon-button-shape-start-end, var(--_icon-button-shape));--_icon-button-shape-end-start: var(--forge-icon-button-shape-end-start, var(--_icon-button-shape));--_icon-button-shape-end-end: var(--forge-icon-button-shape-end-end, var(--_icon-button-shape));--_icon-button-shape-squared: var(--forge-icon-button-shape-squared, calc(var(--forge-shape-medium, 4px) * var(--forge-shape-factor, 1)));--_icon-button-outlined-border-width: var(--forge-icon-button-outlined-border-width, 1px);--_icon-button-outlined-border-style: var(--forge-icon-button-outlined-border-style, solid);--_icon-button-outlined-border-color: var(--forge-icon-button-outlined-border-color, var(--_icon-button-icon-color));--_icon-button-tonal-icon-color: var(--forge-icon-button-tonal-icon-color, var(--forge-theme-on-primary-container, #222c62));--_icon-button-tonal-background-color: var(--forge-icon-button-tonal-background-color, var(--forge-theme-primary-container, #d1d5ed));--_icon-button-filled-icon-color: var(--forge-icon-button-filled-icon-color, var(--forge-theme-on-primary, #ffffff));--_icon-button-filled-background-color: var(--forge-icon-button-filled-background-color, var(--forge-theme-primary, #3f51b5));--_icon-button-raised-shadow: var(--forge-icon-button-raised-shadow, 0px 3px 1px -2px rgba(0, 0, 0, .2), 0px 2px 2px 0px rgba(0, 0, 0, .14), 0px 1px 5px 0px rgba(0, 0, 0, .12));--_icon-button-raised-hover-shadow: var(--forge-icon-button-raised-hover-shadow, 0px 2px 4px -1px rgba(0, 0, 0, .2), 0px 4px 5px 0px rgba(0, 0, 0, .14), 0px 1px 10px 0px rgba(0, 0, 0, .12));--_icon-button-raised-active-shadow: var(--forge-icon-button-raised-active-shadow, 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12));--_icon-button-raised-disabled-shadow: var(--forge-icon-button-raised-disabled-shadow, none);--_icon-button-density-small-size: var(--forge-icon-button-density-small-size, 24px);--_icon-button-density-small-padding: var(--forge-icon-button-density-small-padding, var(--forge-spacing-xxxsmall, 2px));--_icon-button-density-small-icon-size: var(--forge-icon-button-density-small-icon-size, calc(var(--forge-typography-font-size, 1rem) * 1.125));--_icon-button-density-medium-size: var(--forge-icon-button-density-medium-size, 36px);--_icon-button-density-medium-padding: var(--forge-icon-button-density-medium-padding, var(--forge-spacing-xxsmall, 4px));--_icon-button-density-large-size: var(--forge-icon-button-density-large-size, var(--_icon-button-size));--_icon-button-toggle-on-background-color: var(--forge-icon-button-toggle-on-background-color, var(--forge-theme-primary-container, #d1d5ed));--_icon-button-toggle-on-icon-color: var(--forge-icon-button-toggle-on-icon-color, var(--forge-theme-primary, #3f51b5));--_icon-button-outlined-toggle-on-background-color: var(--forge-icon-button-outlined-toggle-on-background-color, var(--forge-theme-primary-container, #d1d5ed));--_icon-button-outlined-toggle-on-icon-color: var(--forge-icon-button-outlined-toggle-on-icon-color, var(--forge-theme-primary, #3f51b5));--_icon-button-tonal-toggle-background-color: var(--forge-icon-button-tonal-toggle-background-color, var(--forge-theme-surface-container-low, #ebebeb));--_icon-button-tonal-toggle-on-background-color: var(--forge-icon-button-tonal-toggle-on-background-color, var(--forge-theme-primary-container, #d1d5ed));--_icon-button-tonal-toggle-on-icon-color: var(--forge-icon-button-tonal-toggle-on-icon-color, var(--forge-theme-primary, #3f51b5));--_icon-button-filled-toggle-background-color: var(--forge-icon-button-filled-toggle-background-color, var(--forge-theme-surface-container-low, #ebebeb));--_icon-button-filled-toggle-icon-color: var(--forge-icon-button-filled-toggle-icon-color, var(--forge-theme-primary, #3f51b5));--_icon-button-filled-toggle-on-background-color: var(--forge-icon-button-filled-toggle-on-background-color, var(--forge-theme-primary, #3f51b5));--_icon-button-filled-toggle-on-icon-color: var(--forge-icon-button-filled-toggle-on-icon-color, var(--forge-theme-on-primary, #ffffff));--_icon-button-disabled-cursor: var(--forge-icon-button-disabled-cursor, not-allowed);--_icon-button-disabled-opacity: var(--forge-icon-button-disabled-opacity, .38);--_icon-button-popover-icon-padding: var(--forge-icon-button-popover-icon-padding, var(--forge-spacing-xsmall, 8px));--_icon-button-focus-indicator-color: var(--forge-icon-button-focus-indicator-color, var(--forge-theme-primary, #3f51b5))}.forge-icon-button{outline:none;-webkit-tap-highlight-color:transparent;position:relative;z-index:0;display:var(--_icon-button-display);align-items:center;justify-content:center;gap:var(--_icon-button-gap);box-sizing:border-box;height:var(--_icon-button-density-large-size);min-width:var(--_icon-button-density-large-size);border:var(--_icon-button-border);border-start-start-radius:var(--_icon-button-shape-start-start);border-start-end-radius:var(--_icon-button-shape-start-end);border-end-start-radius:var(--_icon-button-shape-end-start);border-end-end-radius:var(--_icon-button-shape-end-end);padding:var(--_icon-button-padding);box-shadow:var(--_icon-button-shadow);color:var(--_icon-button-icon-color);background:var(--_icon-button-background-color);font-size:var(--_icon-button-icon-size);cursor:var(--_icon-button-cursor);-webkit-user-select:none;user-select:none;transition-property:box-shadow,background;transition-duration:var(--_icon-button-transition-duration);transition-timing-function:var(--_icon-button-transition-timing)}.forge-icon-button img,.forge-icon-button svg{height:var(--_icon-button-icon-size);width:var(--_icon-button-icon-size)}.forge-icon-button svg{fill:currentColor}.forge-icon-button:not(:disabled){--_state-layer-display: var(--forge-state-layer-display, flex);--_state-layer-color: var(--forge-state-layer-color, var(--forge-theme-on-surface, #000000));--_state-layer-hover-color: var(--forge-state-layer-hover-color, var(--_state-layer-color));--_state-layer-hover-opacity: var(--forge-state-layer-hover-opacity, .08);--_state-layer-pressed-color: var(--forge-state-layer-pressed-color, var(--_state-layer-color));--_state-layer-pressed-opacity: var(--forge-state-layer-pressed-opacity, .12);--_state-layer-hover-duration: var(--forge-state-layer-hover-duration, 15ms);--_state-layer-pressed-duration: var(--forge-state-layer-pressed-duration, 105ms);--_state-layer-animation-duration: var(--forge-state-layer-animation-duration, 375ms)}.forge-icon-button:not(:disabled):before{position:absolute;backface-visibility:hidden;transform:translateZ(0);background-color:var(--_state-layer-hover-color);inset:0;transition:opacity var(--_state-layer-hover-duration) linear,background-color var(--_state-layer-hover-duration) linear;--_state-layer-hover-duration: var(--forge-state-layer-hover-duration, .1s);content:"";opacity:0;border-radius:inherit}.forge-icon-button:not(:disabled):hover:before{background-color:var(--_state-layer-hover-color);opacity:var(--_state-layer-hover-opacity)}.forge-icon-button:not(:disabled):active:before{opacity:var(--_state-layer-pressed-opacity);transition-duration:var(--_state-layer-pressed-duration);--_state-layer-pressed-opacity: var(--forge-state-layer-pressed-opacity, .18)}.forge-icon-button:not(:disabled){--forge-state-layer-color: var(--_icon-button-icon-color)}@keyframes forge-focus-indicator-outward-grow{0%{outline-width:0}to{outline-width:var(--_focus-indicator-active-width)}}@keyframes forge-focus-indicator-outward-shrink{0%{outline-width:var(--_focus-indicator-active-width)}}@keyframes forge-focus-indicator-inward-grow{0%{border-width:0}to{border-width:var(--_focus-indicator-active-width)}}@keyframes forge-focus-indicator-inward-shrink{0%{border-width:var(--_focus-indicator-active-width)}}.forge-icon-button:not(:disabled){outline:none}.forge-icon-button:not(:disabled):focus-visible:after{--_focus-indicator-display: var(--forge-focus-indicator-display, flex);--_focus-indicator-width: var(--forge-focus-indicator-width, var(--forge-border-medium, 2px));--_focus-indicator-active-width: var(--forge-focus-indicator-active-width, 6px);--_focus-indicator-color: var(--forge-focus-indicator-color, var(--forge-theme-primary, #3f51b5));--_focus-indicator-shape: var(--forge-focus-indicator-shape, calc(var(--forge-shape-extra-small, 1px) * var(--forge-shape-factor, 1)));--_focus-indicator-duration: var(--forge-focus-indicator-duration, var(--forge-animation-duration-long4, .6s));--_focus-indicator-easing: var(--forge-focus-indicator-easing, var(--forge-animation-easing-emphasized, cubic-bezier(.2, 0, 0, 1)));--_focus-indicator-shape-start-start: var(--forge-focus-indicator-shape-start-start, var(--_focus-indicator-shape));--_focus-indicator-shape-start-end: var(--forge-focus-indicator-shape-start-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-end: var(--forge-focus-indicator-shape-end-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-start: var(--forge-focus-indicator-shape-end-start, var(--_focus-indicator-shape));--_focus-indicator-outward-offset: var(--forge-focus-indicator-outward-offset, var(--forge-spacing-xxsmall, 4px));--_focus-indicator-inward-offset: var(--forge-focus-indicator-inward-offset, 0px);--_focus-indicator-offset-block: var(--forge-focus-indicator-offset-block, 0);--_focus-indicator-offset-inline: var(--forge-focus-indicator-offset-inline, 0)}.forge-icon-button:not(:disabled):focus-visible:after{animation-delay:0s,calc(var(--_focus-indicator-duration) * .25);animation-duration:calc(var(--_focus-indicator-duration) * .25),calc(var(--_focus-indicator-duration) * .75);animation-timing-function:var(--_focus-indicator-easing);box-sizing:border-box;color:var(--_focus-indicator-color);display:none;pointer-events:none;position:absolute;margin-block:var(--_focus-indicator-offset-block);margin-inline:var(--_focus-indicator-offset-inline);animation-name:forge-focus-indicator-outward-grow,forge-focus-indicator-outward-shrink;border-end-end-radius:calc(var(--_focus-indicator-shape-end-end) + var(--_focus-indicator-outward-offset));border-end-start-radius:calc(var(--_focus-indicator-shape-end-start) + var(--_focus-indicator-outward-offset));border-start-end-radius:calc(var(--_focus-indicator-shape-start-end) + var(--_focus-indicator-outward-offset));border-start-start-radius:calc(var(--_focus-indicator-shape-start-start) + var(--_focus-indicator-outward-offset));inset:calc(-1 * var(--_focus-indicator-outward-offset));outline:var(--_focus-indicator-width) solid currentColor;content:"";display:block}.forge-icon-button:not(:disabled){--forge-focus-indicator-color: var(--_icon-button-focus-indicator-color);--forge-focus-indicator-shape: var(--_icon-button-shape)}.forge-icon-button:not(:disabled):where(.forge-icon-button--text,:not(:where(.forge-icon-button--outlined,.forge-icon-button--tonal,.forge-icon-button--filled,.forge-icon-button--raised))){--forge-focus-indicator-outward-offset: 0px}.forge-icon-button--outlined{border-width:var(--_icon-button-outlined-border-width);border-style:var(--_icon-button-outlined-border-style);border-color:var(--_icon-button-outlined-border-color)}.forge-icon-button--tonal{--_icon-button-icon-color: var(--_icon-button-tonal-icon-color);--_icon-button-background-color: var(--_icon-button-tonal-background-color)}.forge-icon-button--filled,.forge-icon-button--raised{--_icon-button-icon-color: var(--_icon-button-filled-icon-color);--_icon-button-background-color: var(--_icon-button-filled-background-color)}.forge-icon-button--raised{--_icon-button-shadow: var(--_icon-button-raised-shadow)}.forge-icon-button--raised:hover{--_icon-button-raised-shadow: var(--_icon-button-raised-hover-shadow)}.forge-icon-button--raised:active{--_icon-button-raised-shadow: var(--_icon-button-raised-active-shadow)}.forge-icon-button--squared{--_icon-button-shape: var(--_icon-button-shape-squared)}.forge-icon-button--small{--_icon-button-size: var(--_icon-button-density-small-size);--_icon-button-icon-size: var(--_icon-button-density-small-icon-size);--_icon-button-padding: var(--_icon-button-density-small-padding)}.forge-icon-button--small>*{font-size:var(--_icon-button-density-small-icon-size)}.forge-icon-button--medium{--_icon-button-size: var(--_icon-button-density-medium-size);--_icon-button-padding: var(--_icon-button-density-medium-padding)}.forge-icon-button:disabled{pointer-events:none;opacity:var(--_icon-button-disabled-opacity);pointer-events:auto;cursor:not-allowed}.forge-icon-button forge-circular-progress{--forge-circular-progress-indicator-color: var(--_icon-button-icon-color);--forge-circular-progress-track-color: transparent;--forge-circular-progress-size: 1em}.ai-icon-button>svg{fill:var(--forge-theme-text-medium, rgba(0, 0, 0, .6))}:host{display:contents}forge-ai-chat-interface{flex-grow:1}.ai-dialog{position:relative;overflow:hidden;box-sizing:border-box;background:var(--forge-theme-surface-bright, #ffffff);border-radius:calc(var(--forge-shape-large, 8px) * var(--forge-shape-factor, 1));box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;border:none;outline:none;width:420px;height:calc(100vh - 72px);padding:0;inset:auto;bottom:var(--forge-spacing-medium, 16px);right:var(--forge-spacing-medium, 16px);animation-duration:.15s;animation-timing-function:cubic-bezier(0,0,0,1);animation-name:fadein,zoomin;transform-origin:right bottom}.ai-dialog:popover-open::backdrop{display:none}.ai-dialog.closing{animation-duration:.1s;animation-timing-function:cubic-bezier(.3,0,1,1);animation-name:fadeout,zoomout;animation-fill-mode:forwards;transform-origin:right bottom}@keyframes fadein{0%{opacity:0}to{opacity:1}}@keyframes zoomin{0%{transform:scale(.8)}to{transform:scale(1)}}@keyframes fadeout{0%{opacity:1}to{opacity:0}}@keyframes zoomout{0%{transform:scale(1)}to{transform:scale(.8)}}.drag-handle{position:absolute;top:0;left:50%;transform:translate(-50%);z-index:10;opacity:0;visibility:hidden;transition:opacity .15s ease,visibility .15s ease;cursor:grab}.drag-handle:active{cursor:grabbing}.ai-dialog:hover .drag-handle,.ai-dialog:focus-within .drag-handle{opacity:1;visibility:visible}.ai-dialog.dragging{opacity:.7;transition:none}';var to=Object.defineProperty,ro=Object.getOwnPropertyDescriptor,$=t=>{throw TypeError(t)},k=(t,o,e,i)=>{for(var r=i>1?void 0:i?ro(o,e):o,s=t.length-1,a;s>=0;s--)(a=t[s])&&(r=(i?a(o,e,r):a(r))||r);return i&&r&&to(o,e,r),r},E=(t,o,e)=>o.has(t)||$("Cannot "+e),n=(t,o,e)=>(E(t,o,"read from private field"),e?e.call(t):o.get(t)),l=(t,o,e)=>o.has(t)?$("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(t):o.set(t,e),h=(t,o,e,i)=>(E(t,o,"write to private field"),o.set(t,e),e),d=(t,o,e)=>(E(t,o,"access private method"),e),y,T,C,z,p,g,u,D,c,P,H,R,L,S,w,K,U,V,O,x,A;const q=768,eo=100,no="forge-ai-dialog";let _=class extends G{constructor(){super(...arguments),l(this,c),this.open=!1,this.expanded=!1,this._isFullscreen=window.innerWidth<=q,this._isClosing=!1,l(this,y),l(this,T,M()),l(this,C,M()),l(this,z,M()),l(this,p),l(this,g),l(this,u),l(this,D,Y`<slot></slot>`),l(this,w,t=>{const o=this._isFullscreen;if(this._isFullscreen=t.matches,o!==this._isFullscreen){const r=new CustomEvent("forge-ai-dialog-fullscreen-change",{bubbles:!0,composed:!0,detail:{isFullscreen:this._isFullscreen}});this.dispatchEvent(r)}const e=o||this.expanded,i=this._isFullscreen||this.expanded;e!==i&&this.open&&this.requestUpdate()}),l(this,A,t=>{t.key==="Escape"&&(t.preventDefault(),this.close())})}get isFullscreen(){return this._isFullscreen}connectedCallback(){super.connectedCallback(),d(this,c,R).call(this),d(this,c,L).call(this)}disconnectedCallback(){super.disconnectedCallback(),d(this,c,S).call(this),d(this,c,x).call(this),n(this,u)&&(clearTimeout(n(this,u)),h(this,u,void 0))}updated(t){super.updated(t),(t.has("open")||t.has("expanded")||t.has("_isFullscreen"))&&(t.has("open")&&!this.open?n(this,g)?.resetPosition():(t.has("expanded")||t.has("_isFullscreen"))&&(this._isFullscreen||this.expanded)&&n(this,g)?.resetPosition(),d(this,c,K).call(this))}render(){const t=this._isFullscreen||this.expanded;return J(t,()=>n(this,c,H),()=>n(this,c,P))}show(){this.open=!0}close(){this.expanded&&(this.expanded=!1),this.open=!1,n(this,g)?.resetPosition();const t=new CustomEvent("forge-ai-dialog-close",{bubbles:!0,composed:!0});this.dispatchEvent(t)}toggle(){this.open?this.close():this.show()}};y=new WeakMap;T=new WeakMap;C=new WeakMap;z=new WeakMap;p=new WeakMap;g=new WeakMap;u=new WeakMap;D=new WeakMap;c=new WeakSet;P=function(){const t=["ai-dialog",n(this,g)?.isDragging?"dragging":"",this._isClosing?"closing":""].filter(Boolean).join(" ");return Y`
      <dialog
        ${X(n(this,T))}
        aria-modal="false"
        aria-labelledby="dialog-title"
        popover="manual"
        class="${t}"
        @toggle=${d(this,c,U)}>
        <button
          ${X(n(this,z))}
          id="drag-handle"
          aria-label="Move dialog"
          class="forge-icon-button forge-icon-button--small ai-icon-button drag-handle"
          tabindex="0"
          @pointerdown=${n(this,g)?.handlePointerDown}
          @keydown=${n(this,g)?.handleKeyDown}>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path fill="none" d="M0 0h24v24H0z" />
            <path d="M20 9H4v2h16zM4 15h16v-2H4z" />
          </svg>
        </button>
        ${n(this,D)}
      </dialog>
    `};H=function(){return Y`
      <forge-ai-modal ${X(n(this,C))} @forge-ai-modal-close=${d(this,c,V)}>
        ${n(this,D)}
      </forge-ai-modal>
    `};R=function(){h(this,y,window.matchMedia(`(max-width: ${q}px)`)),n(this,y).addEventListener("change",n(this,w)),n(this,w).call(this,n(this,y))};L=function(){h(this,g,new j(this,{targetElementRef:n(this,T),dragHandleRef:n(this,z),snapToViewport:!0,constrainKeyboardNavigation:!0,keyboardStep:10,snapAnimationDuration:200,allowOutOfBounds:!0}))};S=function(){n(this,y)?.removeEventListener("change",n(this,w))};w=new WeakMap;K=function(){const t=this._isFullscreen||this.expanded;if(n(this,u)&&(clearTimeout(n(this,u)),h(this,u,void 0)),t){d(this,c,x).call(this),this._isClosing=!1;const o=n(this,C).value;o&&(this.open?o.open||o.show():o.open&&o.close())}else{const o=n(this,T).value;o&&(this.open?(this._isClosing=!1,d(this,c,O).call(this),o.showPopover()):(d(this,c,x).call(this),this._isClosing=!0,h(this,u,window.setTimeout(()=>{this._isClosing=!1,o.hidePopover(),h(this,u,void 0)},eo))))}};U=function(t){const o=this.open;this.open=t.newState==="open",this.open&&!o?d(this,c,O).call(this):!this.open&&o&&d(this,c,x).call(this)};V=function(){this.close()};O=function(){n(this,p)||(h(this,p,new AbortController),document.addEventListener("keydown",n(this,A),{signal:n(this,p).signal}))};x=function(){n(this,p)&&(n(this,p).abort(),h(this,p,void 0))};A=new WeakMap;_.styles=Q(oo);k([F({type:Boolean})],_.prototype,"open",2);k([F({type:Boolean})],_.prototype,"expanded",2);k([W()],_.prototype,"_isFullscreen",2);k([W()],_.prototype,"_isClosing",2);_=k([Z(no)],_);
