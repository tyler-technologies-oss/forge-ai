import{E as p,T as Kt,r as ot,i as at,x as d}from"./iframe-tTf1YFhn.js";import{t as it}from"./custom-element-UsVr97OX.js";import{n as u}from"./property-D1sRqruW.js";import{e as q,n as J}from"./ai-modal-TlMp46a4.js";import{i as Yt,t as Zt,a as Qt}from"./class-map-D6J53kEk.js";import{n as N}from"./when-CI7b_ccM.js";import{r as Xt,S as jt,g as R,d as te}from"./mock-adapter-CyWJDEYb.js";import"./ai-attachment-LLh_wDA9.js";import"./ai-chat-header-CXxFzTYY.js";import"./ai-chat-interface-CqVdqT-d.js";import"./ai-empty-state-D23znYeq.js";import"./ai-error-message-CEAmwJRA.js";import"./ai-file-picker-BnVATo6H.js";import"./ai-prompt-DGdjuIFE.js";import"./ai-response-message-DTJdxfmr.js";import"./ai-suggestions-DsIXhdAL.js";import"./ai-thinking-indicator-D_qc2Btw.js";import"./ai-user-message-BoEhGfEC.js";import"./ai-voice-input-DtaWbmEE.js";import{r as ee}from"./state-CoFQ-eiY.js";import{e as oe}from"./query-BpjciUlk.js";import"./popover--wdwyx1y.js";class P extends Yt{constructor(t){if(super(t),this.it=p,t.type!==Zt.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===p||t==null)return this._t=void 0,this.it=t;if(t===Kt)return t;if(typeof t!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const o=[t];return o.raw=o,this._t={_$litType$:this.constructor.resultType,strings:o,values:[]}}}P.directiveName="unsafeHTML",P.resultType=1;const W=Qt(P);class ae{constructor(t){this._attachments=new Map,this._abortCallbacks=new Map,this._config=t}get pendingAttachments(){return Array.from(this._attachments.values()).filter(t=>t.status==="pending"||t.status==="uploading").map(t=>t.metadata)}get allAttachments(){return Array.from(this._attachments.values()).map(t=>t.metadata)}get isUploading(){return Array.from(this._attachments.values()).some(t=>t.status==="uploading")}updateConfig(t){this._config={...this._config,...t}}addAttachment(t,o){const a={id:t,status:"pending",...o};this._attachments.set(t,{id:t,metadata:a,status:"pending"}),this._config.onStateChange?.()}removeAttachment(t){this._attachments.delete(t),this._abortCallbacks.delete(t),this._config.onStateChange?.()}updateProgress(t,o){const a=this._attachments.get(t);a&&(a.status="uploading",a.metadata.uploading=!0,a.metadata.progress=o,a.metadata.status="uploading",this._config.onStateChange?.())}markComplete(t,o){const a=this._attachments.get(t);a&&(a.status="complete",a.uploadedFile=o,a.metadata.uploading=!1,a.metadata.progress=100,a.metadata.status="success",this._config.onStateChange?.())}markError(t,o){const a=this._attachments.get(t);a&&(a.status="error",a.errorMessage=o,a.metadata.uploading=!1,a.metadata.status="error",a.metadata.error=o,console.error(`File upload error for ${a.metadata.filename}: ${o}`),this._config.onError?.(o),this.removeAttachment(t))}registerOnAbort(t,o){this._abortCallbacks.set(t,o)}abort(t){const o=this._abortCallbacks.get(t);o&&o(),this.removeAttachment(t)}canSend(){return!Array.from(this._attachments.values()).some(t=>t.status==="uploading")}getCompletedUploads(){return Array.from(this._attachments.values()).filter(t=>t.status==="complete"&&t.uploadedFile).map(t=>t.uploadedFile)}consumeAttachments(){const t=Array.from(this._attachments.values()).map(o=>o.metadata);return this._attachments.clear(),this._abortCallbacks.clear(),this._config.onStateChange?.(),t}clear(){this._attachments.clear(),this._abortCallbacks.clear(),this._config.onStateChange?.()}}class ie{#t;#e;#o=new Map;constructor(t){this.#t=t,t.addController(this)}hostConnected(){}hostDisconnected(){this.#e&&(cancelAnimationFrame(this.#e),this.#e=void 0),this.#o.clear()}#a(t,o){const a=o.length+":"+o.slice(0,50);return`${t}:${a}`}getCachedHtml(t,o){const a=this.#a(t,o);let n=this.#o.get(a);if(!n&&(n=Xt(o),this.#o.set(a,n),this.#o.size>100)){const c=this.#o.keys().next().value;c&&this.#o.delete(c)}return n}scheduleUpdate(){this.#e||(this.#e=requestAnimationFrame(()=>{this.#e=void 0,this.#t.requestUpdate()}))}}class se{constructor(t,o){this._host=t,this._config=o,this._messageItems=[],this._toolCalls=new Map,t.addController(this)}hostConnected(){}hostDisconnected(){this._messageItems=[],this._toolCalls.clear()}updateConfig(t){this._config={...this._config,...t}}get messageItems(){return this._messageItems}getToolCall(t){return this._toolCalls.get(t)}#t(){this._host.requestUpdate()}addMessageItem(t){this._messageItems=[...this._messageItems,t],this.#t()}addMessage(t){this.getMessage(t.id)||this.addMessageItem({type:"message",data:t})}addToolCall(t){this._toolCalls.set(t.id,t),this.addMessageItem({type:"toolCall",data:t})}updateToolCall(t,o){const a=this._toolCalls.get(t);if(!a)return;const n={...a,...o};this._toolCalls.set(t,n),this._messageItems=this._messageItems.map(c=>c.type==="toolCall"&&c.data.id===t?{...c,data:n}:c),this.#t()}appendToMessage(t,o){this._messageItems=this._messageItems.map(a=>a.type==="message"&&a.data.id===t?{...a,data:{...a.data,content:a.data.content+o}}:a),this.#t()}getMessage(t){const o=this._messageItems.find(a=>a.type==="message"&&a.data.id===t);return o?.type==="message"?o.data:void 0}updateMessageStatus(t,o){this._messageItems=this._messageItems.map(a=>a.type==="message"&&a.data.id===t?{...a,data:{...a.data,status:o}}:a),this.#t()}removeMessageItem(t){this._messageItems=this._messageItems.filter((o,a)=>a!==t),this.#t()}clearMessages(){this._messageItems=[],this._toolCalls.clear(),this.#t()}getMessages(){const t=[];let o=null;for(const a of this._messageItems)a.type==="message"?(o&&t.push(o),o={...a.data,toolCalls:[]}):a.type==="toolCall"&&o?.id===a.data.messageId&&(o.toolCalls=[...o.toolCalls||[],a.data]);return o&&t.push(o),t}setMessages(t){const o=[];this._toolCalls.clear();for(const a of t)if(o.push({type:"message",data:{...a,toolCalls:void 0}}),a.toolCalls)for(const n of a.toolCalls)o.push({type:"toolCall",data:n}),this._toolCalls.set(n.id,n);this._messageItems=o,this.#t()}completeToolCall(t,o){this.updateToolCall(t,{result:o,status:"complete"}),this.#e(t)}#e(t){const o=this._toolCalls.get(t);if(!o)return;const a=this._messageItems.findIndex(S=>S.type==="message"&&S.data.id===o.messageId);if(a===-1)return;const n=this._messageItems[a];if(n.type!=="message"||n.data.content.trim())return;const c=this._messageItems.findIndex(S=>S.type==="toolCall"&&S.data.id===t);if(c===-1||c<=a)return;const[b]=this._messageItems.splice(a,1);this._messageItems.splice(c,0,b),this.#t()}removeUploadedFile(t){this._messageItems=this._messageItems.map(o=>o.type==="message"&&o.data.uploadedFiles?{...o,data:{...o.data,uploadedFiles:o.data.uploadedFiles.filter(a=>a.fileId!==t)}}:o),this.#t()}}const re='.forge-icon-button{--_icon-button-display: var(--forge-icon-button-display, inline-flex);--_icon-button-size: var(--forge-icon-button-size, 48px);--_icon-button-gap: var(--forge-icon-button-gap, 0);--_icon-button-icon-color: var(--forge-icon-button-icon-color, currentColor);--_icon-button-background-color: var(--forge-icon-button-background-color, none);--_icon-button-icon-size: var(--forge-icon-button-icon-size, calc(var(--forge-typography-font-size, 1rem) * 1.5));--_icon-button-cursor: var(--forge-icon-button-cursor, pointer);--_icon-button-padding: var(--forge-icon-button-padding, var(--forge-spacing-xxsmall, 4px));--_icon-button-border: var(--forge-icon-button-border, none);--_icon-button-shadow: var(--forge-icon-button-shadow, none);--_icon-button-transition-duration: var(--forge-icon-button-transition-duration, var(--forge-animation-duration-short3, .15s));--_icon-button-transition-timing: var(--forge-icon-button-transition-timing, var(--forge-animation-easing-standard, cubic-bezier(.2, 0, 0, 1)));--_icon-button-shape: var(--forge-icon-button-shape, calc(var(--forge-shape-full, 9999px) * var(--forge-shape-factor, 1)));--_icon-button-shape-start-start: var(--forge-icon-button-shape-start-start, var(--_icon-button-shape));--_icon-button-shape-start-end: var(--forge-icon-button-shape-start-end, var(--_icon-button-shape));--_icon-button-shape-end-start: var(--forge-icon-button-shape-end-start, var(--_icon-button-shape));--_icon-button-shape-end-end: var(--forge-icon-button-shape-end-end, var(--_icon-button-shape));--_icon-button-shape-squared: var(--forge-icon-button-shape-squared, calc(var(--forge-shape-medium, 4px) * var(--forge-shape-factor, 1)));--_icon-button-outlined-border-width: var(--forge-icon-button-outlined-border-width, 1px);--_icon-button-outlined-border-style: var(--forge-icon-button-outlined-border-style, solid);--_icon-button-outlined-border-color: var(--forge-icon-button-outlined-border-color, var(--_icon-button-icon-color));--_icon-button-tonal-icon-color: var(--forge-icon-button-tonal-icon-color, var(--forge-theme-on-primary-container, #222c62));--_icon-button-tonal-background-color: var(--forge-icon-button-tonal-background-color, var(--forge-theme-primary-container, #d1d5ed));--_icon-button-filled-icon-color: var(--forge-icon-button-filled-icon-color, var(--forge-theme-on-primary, #ffffff));--_icon-button-filled-background-color: var(--forge-icon-button-filled-background-color, var(--forge-theme-primary, #3f51b5));--_icon-button-raised-shadow: var(--forge-icon-button-raised-shadow, 0px 3px 1px -2px rgba(0, 0, 0, .2), 0px 2px 2px 0px rgba(0, 0, 0, .14), 0px 1px 5px 0px rgba(0, 0, 0, .12));--_icon-button-raised-hover-shadow: var(--forge-icon-button-raised-hover-shadow, 0px 2px 4px -1px rgba(0, 0, 0, .2), 0px 4px 5px 0px rgba(0, 0, 0, .14), 0px 1px 10px 0px rgba(0, 0, 0, .12));--_icon-button-raised-active-shadow: var(--forge-icon-button-raised-active-shadow, 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12));--_icon-button-raised-disabled-shadow: var(--forge-icon-button-raised-disabled-shadow, none);--_icon-button-density-small-size: var(--forge-icon-button-density-small-size, 24px);--_icon-button-density-small-padding: var(--forge-icon-button-density-small-padding, var(--forge-spacing-xxxsmall, 2px));--_icon-button-density-small-icon-size: var(--forge-icon-button-density-small-icon-size, calc(var(--forge-typography-font-size, 1rem) * 1.125));--_icon-button-density-medium-size: var(--forge-icon-button-density-medium-size, 36px);--_icon-button-density-medium-padding: var(--forge-icon-button-density-medium-padding, var(--forge-spacing-xxsmall, 4px));--_icon-button-density-large-size: var(--forge-icon-button-density-large-size, var(--_icon-button-size));--_icon-button-toggle-on-background-color: var(--forge-icon-button-toggle-on-background-color, var(--forge-theme-primary-container, #d1d5ed));--_icon-button-toggle-on-icon-color: var(--forge-icon-button-toggle-on-icon-color, var(--forge-theme-primary, #3f51b5));--_icon-button-outlined-toggle-on-background-color: var(--forge-icon-button-outlined-toggle-on-background-color, var(--forge-theme-primary-container, #d1d5ed));--_icon-button-outlined-toggle-on-icon-color: var(--forge-icon-button-outlined-toggle-on-icon-color, var(--forge-theme-primary, #3f51b5));--_icon-button-tonal-toggle-background-color: var(--forge-icon-button-tonal-toggle-background-color, var(--forge-theme-surface-container-low, #ebebeb));--_icon-button-tonal-toggle-on-background-color: var(--forge-icon-button-tonal-toggle-on-background-color, var(--forge-theme-primary-container, #d1d5ed));--_icon-button-tonal-toggle-on-icon-color: var(--forge-icon-button-tonal-toggle-on-icon-color, var(--forge-theme-primary, #3f51b5));--_icon-button-filled-toggle-background-color: var(--forge-icon-button-filled-toggle-background-color, var(--forge-theme-surface-container-low, #ebebeb));--_icon-button-filled-toggle-icon-color: var(--forge-icon-button-filled-toggle-icon-color, var(--forge-theme-primary, #3f51b5));--_icon-button-filled-toggle-on-background-color: var(--forge-icon-button-filled-toggle-on-background-color, var(--forge-theme-primary, #3f51b5));--_icon-button-filled-toggle-on-icon-color: var(--forge-icon-button-filled-toggle-on-icon-color, var(--forge-theme-on-primary, #ffffff));--_icon-button-disabled-cursor: var(--forge-icon-button-disabled-cursor, not-allowed);--_icon-button-disabled-opacity: var(--forge-icon-button-disabled-opacity, .38);--_icon-button-popover-icon-padding: var(--forge-icon-button-popover-icon-padding, var(--forge-spacing-xsmall, 8px));--_icon-button-focus-indicator-color: var(--forge-icon-button-focus-indicator-color, var(--forge-theme-primary, #3f51b5))}.forge-icon-button{outline:none;-webkit-tap-highlight-color:transparent;position:relative;z-index:0;display:var(--_icon-button-display);align-items:center;justify-content:center;gap:var(--_icon-button-gap);box-sizing:border-box;height:var(--_icon-button-density-large-size);min-width:var(--_icon-button-density-large-size);border:var(--_icon-button-border);border-start-start-radius:var(--_icon-button-shape-start-start);border-start-end-radius:var(--_icon-button-shape-start-end);border-end-start-radius:var(--_icon-button-shape-end-start);border-end-end-radius:var(--_icon-button-shape-end-end);padding:var(--_icon-button-padding);box-shadow:var(--_icon-button-shadow);color:var(--_icon-button-icon-color);background:var(--_icon-button-background-color);font-size:var(--_icon-button-icon-size);cursor:var(--_icon-button-cursor);-webkit-user-select:none;user-select:none;transition-property:box-shadow,background;transition-duration:var(--_icon-button-transition-duration);transition-timing-function:var(--_icon-button-transition-timing)}.forge-icon-button img,.forge-icon-button svg{height:var(--_icon-button-icon-size);width:var(--_icon-button-icon-size)}.forge-icon-button svg{fill:currentColor}.forge-icon-button:not(:disabled){--_state-layer-display: var(--forge-state-layer-display, flex);--_state-layer-color: var(--forge-state-layer-color, var(--forge-theme-on-surface, #000000));--_state-layer-hover-color: var(--forge-state-layer-hover-color, var(--_state-layer-color));--_state-layer-hover-opacity: var(--forge-state-layer-hover-opacity, .08);--_state-layer-pressed-color: var(--forge-state-layer-pressed-color, var(--_state-layer-color));--_state-layer-pressed-opacity: var(--forge-state-layer-pressed-opacity, .12);--_state-layer-hover-duration: var(--forge-state-layer-hover-duration, 15ms);--_state-layer-pressed-duration: var(--forge-state-layer-pressed-duration, 105ms);--_state-layer-animation-duration: var(--forge-state-layer-animation-duration, 375ms)}.forge-icon-button:not(:disabled):before{position:absolute;backface-visibility:hidden;transform:translateZ(0);background-color:var(--_state-layer-hover-color);inset:0;transition:opacity var(--_state-layer-hover-duration) linear,background-color var(--_state-layer-hover-duration) linear;--_state-layer-hover-duration: var(--forge-state-layer-hover-duration, .1s);content:"";opacity:0;border-radius:inherit}.forge-icon-button:not(:disabled):hover:before{background-color:var(--_state-layer-hover-color);opacity:var(--_state-layer-hover-opacity)}.forge-icon-button:not(:disabled):active:before{opacity:var(--_state-layer-pressed-opacity);transition-duration:var(--_state-layer-pressed-duration);--_state-layer-pressed-opacity: var(--forge-state-layer-pressed-opacity, .18)}.forge-icon-button:not(:disabled){--forge-state-layer-color: var(--_icon-button-icon-color)}@keyframes forge-focus-indicator-outward-grow{0%{outline-width:0}to{outline-width:var(--_focus-indicator-active-width)}}@keyframes forge-focus-indicator-outward-shrink{0%{outline-width:var(--_focus-indicator-active-width)}}@keyframes forge-focus-indicator-inward-grow{0%{border-width:0}to{border-width:var(--_focus-indicator-active-width)}}@keyframes forge-focus-indicator-inward-shrink{0%{border-width:var(--_focus-indicator-active-width)}}.forge-icon-button:not(:disabled){outline:none}.forge-icon-button:not(:disabled):focus-visible:after{--_focus-indicator-display: var(--forge-focus-indicator-display, flex);--_focus-indicator-width: var(--forge-focus-indicator-width, var(--forge-border-medium, 2px));--_focus-indicator-active-width: var(--forge-focus-indicator-active-width, 6px);--_focus-indicator-color: var(--forge-focus-indicator-color, var(--forge-theme-primary, #3f51b5));--_focus-indicator-shape: var(--forge-focus-indicator-shape, calc(var(--forge-shape-extra-small, 1px) * var(--forge-shape-factor, 1)));--_focus-indicator-duration: var(--forge-focus-indicator-duration, var(--forge-animation-duration-long4, .6s));--_focus-indicator-easing: var(--forge-focus-indicator-easing, var(--forge-animation-easing-emphasized, cubic-bezier(.2, 0, 0, 1)));--_focus-indicator-shape-start-start: var(--forge-focus-indicator-shape-start-start, var(--_focus-indicator-shape));--_focus-indicator-shape-start-end: var(--forge-focus-indicator-shape-start-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-end: var(--forge-focus-indicator-shape-end-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-start: var(--forge-focus-indicator-shape-end-start, var(--_focus-indicator-shape));--_focus-indicator-outward-offset: var(--forge-focus-indicator-outward-offset, var(--forge-spacing-xxsmall, 4px));--_focus-indicator-inward-offset: var(--forge-focus-indicator-inward-offset, 0px);--_focus-indicator-offset-block: var(--forge-focus-indicator-offset-block, 0);--_focus-indicator-offset-inline: var(--forge-focus-indicator-offset-inline, 0)}.forge-icon-button:not(:disabled):focus-visible:after{animation-delay:0s,calc(var(--_focus-indicator-duration) * .25);animation-duration:calc(var(--_focus-indicator-duration) * .25),calc(var(--_focus-indicator-duration) * .75);animation-timing-function:var(--_focus-indicator-easing);box-sizing:border-box;color:var(--_focus-indicator-color);display:none;pointer-events:none;position:absolute;margin-block:var(--_focus-indicator-offset-block);margin-inline:var(--_focus-indicator-offset-inline);animation-name:forge-focus-indicator-outward-grow,forge-focus-indicator-outward-shrink;border-end-end-radius:calc(var(--_focus-indicator-shape-end-end) + var(--_focus-indicator-outward-offset));border-end-start-radius:calc(var(--_focus-indicator-shape-end-start) + var(--_focus-indicator-outward-offset));border-start-end-radius:calc(var(--_focus-indicator-shape-start-end) + var(--_focus-indicator-outward-offset));border-start-start-radius:calc(var(--_focus-indicator-shape-start-start) + var(--_focus-indicator-outward-offset));inset:calc(-1 * var(--_focus-indicator-outward-offset));outline:var(--_focus-indicator-width) solid currentColor;content:"";display:block}.forge-icon-button:not(:disabled){--forge-focus-indicator-color: var(--_icon-button-focus-indicator-color);--forge-focus-indicator-shape: var(--_icon-button-shape)}.forge-icon-button:not(:disabled):where(.forge-icon-button--text,:not(:where(.forge-icon-button--outlined,.forge-icon-button--tonal,.forge-icon-button--filled,.forge-icon-button--raised))){--forge-focus-indicator-outward-offset: 0px}.forge-icon-button--outlined{border-width:var(--_icon-button-outlined-border-width);border-style:var(--_icon-button-outlined-border-style);border-color:var(--_icon-button-outlined-border-color)}.forge-icon-button--tonal{--_icon-button-icon-color: var(--_icon-button-tonal-icon-color);--_icon-button-background-color: var(--_icon-button-tonal-background-color)}.forge-icon-button--filled,.forge-icon-button--raised{--_icon-button-icon-color: var(--_icon-button-filled-icon-color);--_icon-button-background-color: var(--_icon-button-filled-background-color)}.forge-icon-button--raised{--_icon-button-shadow: var(--_icon-button-raised-shadow)}.forge-icon-button--raised:hover{--_icon-button-raised-shadow: var(--_icon-button-raised-hover-shadow)}.forge-icon-button--raised:active{--_icon-button-raised-shadow: var(--_icon-button-raised-active-shadow)}.forge-icon-button--squared{--_icon-button-shape: var(--_icon-button-shape-squared)}.forge-icon-button--small{--_icon-button-size: var(--_icon-button-density-small-size);--_icon-button-icon-size: var(--_icon-button-density-small-icon-size);--_icon-button-padding: var(--_icon-button-density-small-padding)}.forge-icon-button--small>*{font-size:var(--_icon-button-density-small-icon-size)}.forge-icon-button--medium{--_icon-button-size: var(--_icon-button-density-medium-size);--_icon-button-padding: var(--_icon-button-density-medium-padding)}.forge-icon-button:disabled{pointer-events:none;opacity:var(--_icon-button-disabled-opacity);pointer-events:auto;cursor:not-allowed}.forge-icon-button forge-circular-progress{--forge-circular-progress-indicator-color: var(--_icon-button-icon-color);--forge-circular-progress-track-color: transparent;--forge-circular-progress-size: 1em}:host{display:block}.tool-call{display:flex;align-items:center;gap:var(--forge-spacing-small, 12px)}.tool-name{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--forge-typography-body1-font-family, var(--forge-typography-font-family, "Roboto", sans-serif));font-size:var(--forge-typography-body1-font-size, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-body-font-size-scale, .875)));font-weight:var(--forge-typography-body1-font-weight, 400);line-height:var(--forge-typography-body1-line-height, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-body-line-height-scale, 1.125)));letter-spacing:var(--forge-typography-body1-letter-spacing, .0357142857em);text-transform:var(--forge-typography-body1-text-transform, inherit);text-decoration:var(--forge-typography-body1-text-decoration, inherit);color:var(--forge-theme-text-medium, rgba(0, 0, 0, .6))}.status-icon{flex-shrink:0;display:flex;align-items:center;color:var(--forge-theme-text-medium, rgba(0, 0, 0, .6))}.info-button{color:var(--forge-theme-text-medium, rgba(0, 0, 0, .6))}.info-button:hover{color:var(--forge-theme-text-high, rgba(0, 0, 0, .87))}.tool-details{display:grid;gap:var(--forge-spacing-medium, 16px);padding:var(--forge-spacing-medium, 16px);min-width:300px;max-width:500px;min-height:100px;max-height:400px;overflow-y:auto}.tool-section{display:grid;gap:var(--forge-spacing-xsmall, 8px)}.section-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--forge-typography-heading1-font-family, var(--forge-typography-font-family, "Roboto", sans-serif));font-size:var(--forge-typography-heading1-font-size, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-heading1-font-size-scale, .875)));font-weight:var(--forge-typography-heading1-font-weight, 500);line-height:var(--forge-typography-heading1-line-height, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-heading1-line-height-scale, 1.125)));letter-spacing:var(--forge-typography-heading1-letter-spacing, .0178571429em);text-transform:var(--forge-typography-heading1-text-transform, inherit);text-decoration:var(--forge-typography-heading1-text-decoration, inherit)}.code-block{background-color:var(--forge-theme-surface-container-minimum, #f5f5f5);color:var(--forge-theme-on-surface-container-minimum, #000000);padding:var(--forge-spacing-small, 12px);border-radius:calc(var(--forge-shape-medium, 4px) * var(--forge-shape-factor, 1));overflow-x:auto;margin:0;font-family:monospace;font-size:.85em;white-space:pre-wrap;word-wrap:break-word}';var ne=Object.defineProperty,le=Object.getOwnPropertyDescriptor,st=e=>{throw TypeError(e)},U=(e,t,o,a)=>{for(var n=a>1?void 0:a?le(t,o):t,c=e.length-1,b;c>=0;c--)(b=e[c])&&(n=(a?b(t,o,n):b(n))||n);return a&&n&&ne(t,o,n),n},K=(e,t,o)=>t.has(e)||st("Cannot "+o),v=(e,t,o)=>(K(e,t,"read from private field"),o?o.call(e):t.get(e)),F=(e,t,o)=>t.has(e)?st("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,o),tt=(e,t,o,a)=>(K(e,t,"write to private field"),t.set(e,o),o),et=(e,t,o)=>(K(e,t,"access private method"),o),O,w,C,rt,nt,lt,L,ct,dt;const ce="forge-ai-chatbot-tool-call";let z=class extends at{constructor(){super(...arguments),F(this,C),this._popoverOpen=!1,F(this,O,q()),F(this,w),F(this,L,d`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor">
      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z" />
    </svg>
  `)}updated(e){if(super.updated(e),e.has("toolCall")||e.has("toolDefinition")){const t=this.toolDefinition?.renderer,o=v(this,O).value;if(o&&this.toolCall.status==="complete")if(v(this,w)&&o.contains(v(this,w))&&o.removeChild(v(this,w)),t?.elementTag){const a=document.createElement(t.elementTag);a.toolCall=this.toolCall,tt(this,w,a),o.appendChild(a)}else t?.render&&(tt(this,w,t.render(this.toolCall)),o.appendChild(v(this,w)))}}render(){const e=this.toolCall.status==="complete";return d`
      <div class="tool-call">
        <span class="status-icon">${v(this,C,lt)}</span>
        <span class="tool-name">${this.toolDefinition?.displayName??this.toolCall.name}</span>
        ${e?d`
              <button
                class="forge-icon-button forge-icon-button--small info-button"
                type="button"
                aria-label="${this._popoverOpen?"Hide":"Show"} tool details"
                aria-expanded="${this._popoverOpen}"
                @click=${et(this,C,rt)}>
                ${v(this,L)}
              </button>
            `:p}
      </div>
      ${e?d`
            <forge-ai-popover
              .anchor=${this._infoButton}
              .open=${this._popoverOpen}
              placement="bottom-start"
              .flip=${!0}
              @forge-ai-popover-toggle=${et(this,C,nt)}>
              ${v(this,C,dt)}
            </forge-ai-popover>
          `:p}
      ${v(this,C,ct)}
    `}};O=new WeakMap;w=new WeakMap;C=new WeakSet;rt=function(e){this._popoverOpen=!this._popoverOpen};nt=function(e){this._popoverOpen=e.detail.newState==="open"};lt=function(){switch(this.toolCall.status){case"pending":case"executing":return d`<forge-ai-thinking-indicator></forge-ai-thinking-indicator>`;case"complete":return d`
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor">
            <path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59z" />
          </svg>
        `;case"error":return d`
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor">
            <path fill="none" d="M0 0h24v24H0z" />
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z" />
          </svg>
        `;default:return p}};L=new WeakMap;ct=function(){const e=this.toolDefinition?.renderer;return!e||this.toolCall.status!=="complete"?p:e.elementTag||e.render?d`<div ${J(v(this,O))}></div>`:p};dt=function(){const e=Object.keys(this.toolCall.args).length>0,t=this.toolCall.argsBuffer&&this.toolCall.argsBuffer.length>0,o=this.toolCall.result!==void 0;return d`
      <div class="tool-details">
        ${t?d`
              <div class="tool-section">
                <div class="section-label">Arguments (streaming):</div>
                <pre class="code-block">${this.toolCall.argsBuffer}</pre>
              </div>
            `:e?d`
                <div class="tool-section">
                  <div class="section-label">Arguments:</div>
                  <pre class="code-block">${JSON.stringify(this.toolCall.args,null,2)}</pre>
                </div>
              `:p}
        ${o?d`
              <div class="tool-section">
                <div class="section-label">Result:</div>
                <pre class="code-block">${JSON.stringify(this.toolCall.result,null,2)}</pre>
              </div>
            `:p}
      </div>
    `};z.styles=ot(re);U([u({attribute:!1})],z.prototype,"toolCall",2);U([u({attribute:!1})],z.prototype,"toolDefinition",2);U([ee()],z.prototype,"_popoverOpen",2);U([oe(".info-button")],z.prototype,"_infoButton",2);z=U([it(ce)],z);const de=':host{display:block;width:100%;height:100%}.header-title{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--forge-typography-subheading2-font-family, var(--forge-typography-font-family, "Roboto", sans-serif));font-size:var(--forge-typography-subheading2-font-size, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-subheading2-font-size-scale, 1)));font-weight:var(--forge-typography-subheading2-font-weight, 400);line-height:var(--forge-typography-subheading2-line-height, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-subheading2-line-height-scale, 1.25)));letter-spacing:var(--forge-typography-subheading2-letter-spacing, normal);text-transform:var(--forge-typography-subheading2-text-transform, inherit);text-decoration:var(--forge-typography-subheading2-text-decoration, inherit)}.thinking-indicator{margin-block-start:var(--forge-spacing-xsmall, 8px)}.system-message{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--forge-typography-subheading2-font-family, var(--forge-typography-font-family, "Roboto", sans-serif));font-size:var(--forge-typography-subheading2-font-size, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-subheading2-font-size-scale, 1)));font-weight:var(--forge-typography-subheading2-font-weight, 400);line-height:var(--forge-typography-subheading2-line-height, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-subheading2-line-height-scale, 1.25)));letter-spacing:var(--forge-typography-subheading2-letter-spacing, normal);text-transform:var(--forge-typography-subheading2-text-transform, inherit);text-decoration:var(--forge-typography-subheading2-text-decoration, inherit);color:var(--forge-theme-text-medium, rgba(0, 0, 0, .6));padding-block:var(--forge-spacing-small, 12px)}';var he=Object.defineProperty,ge=Object.getOwnPropertyDescriptor,ht=e=>{throw TypeError(e)},m=(e,t,o,a)=>{for(var n=a>1?void 0:a?ge(t,o):t,c=e.length-1,b;c>=0;c--)(b=e[c])&&(n=(a?b(t,o,n):b(n))||n);return a&&n&&he(t,o,n),n},Y=(e,t,o)=>t.has(e)||ht("Cannot "+o),s=(e,t,o)=>(Y(e,t,"read from private field"),o?o.call(e):t.get(e)),_=(e,t,o)=>t.has(e)?ht("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,o),k=(e,t,o,a)=>(Y(e,t,"write to private field"),t.set(e,o),o),r=(e,t,o)=>(Y(e,t,"access private method"),o),A,E,l,h,$,M,T,i,x,B,gt,V,I,G,D,ft,ut,pt,mt,bt,Z,vt,yt,_t,wt,xt,Ct,Q,X,kt,H,$t,Mt,zt,It,Tt,j,At,St,Et,Rt,Ut,Bt,Dt,y,Ft,Ot,Ht,Wt,qt,Nt,Pt,Lt,Vt,Gt,Jt,g;const fe="forge-ai-chatbot";let f=class extends at{constructor(){super(...arguments),_(this,i),this.fileUpload="off",this.voiceInput="on",this.placeholder="Ask a question...",this.showExpandButton=!1,this.showMinimizeButton=!1,this.expanded=!1,this.minimizeIcon="default",this.enableReactions=!1,this.titleText="AI Assistant",_(this,A,q()),_(this,E,q()),_(this,l),_(this,h),_(this,$),_(this,M),_(this,T)}connectedCallback(){super.connectedCallback(),k(this,l,new se(this,{tools:s(this,i,I)})),k(this,$,new ie(this)),k(this,h,new ae({onError:e=>{r(this,i,g).call(this,{type:"forge-ai-chatbot-error",detail:{error:e}})},onStateChange:()=>{this.requestUpdate()}})),this.adapter&&r(this,i,G).call(this)}disconnectedCallback(){super.disconnectedCallback(),s(this,T)?.unsubscribe(),this.adapter?.disconnect()}willUpdate(e){e.has("adapter")&&this.adapter&&(k(this,M,void 0),r(this,i,G).call(this))}clearMessages(){s(this,l).clearMessages(),s(this,h).clear()}getMessages(){return s(this,l).getMessages()}setMessages(e){s(this,l).setMessages(e)}async sendMessage(e,t){if(!this.adapter){console.warn("No adapter configured.");return}if(t){const o=Date.now();for(const a of t)r(this,i,j).call(this,a,o)}await r(this,i,X).call(this,{content:e,attachments:s(this,h).pendingAttachments})}abort(){r(this,i,H).call(this)}getThreadState(){return{threadId:this.adapter?.threadId,messages:this.getMessages(),timestamp:Date.now()}}setThreadState(e){this.setMessages(e.messages),e.threadId&&this.adapter&&(this.adapter.threadId=e.threadId)}render(){return d`
      <forge-ai-chat-interface
        ${J(s(this,A))}
        role="region"
        aria-label="AI chatbot"
        aria-live="polite"
        aria-busy=${s(this,i,B)}>
        <forge-ai-chat-header
          slot="header"
          ?show-expand-button=${this.showExpandButton}
          ?show-minimize-button=${this.showMinimizeButton}
          ?expanded=${this.expanded}
          export-option=${s(this,i,V)?"enabled":"off"}
          clear-option=${s(this,i,V)?"enabled":"off"}
          .minimizeIcon=${this.minimizeIcon}
          .agentInfo=${this.agentInfo}
          .titleText=${this.titleText}
          @forge-ai-chat-header-expand=${r(this,i,Ft)}
          @forge-ai-chat-header-minimize=${r(this,i,Ot)}
          @forge-ai-chat-header-clear=${r(this,i,Ht)}
          @forge-ai-chat-header-export=${r(this,i,qt)}
          @forge-ai-chat-header-info=${r(this,i,Wt)}>
          <slot name="header-title" slot="title">
            <span class="header-title">${this.titleText}</span>
          </slot>
        </forge-ai-chat-header>
        ${s(this,i,Gt)} ${s(this,i,Jt)} ${s(this,i,Lt)} ${s(this,i,Pt)}
      </forge-ai-chat-interface>
    `}};A=new WeakMap;E=new WeakMap;l=new WeakMap;h=new WeakMap;$=new WeakMap;M=new WeakMap;T=new WeakMap;i=new WeakSet;x=function(){return s(this,l)?.messageItems??[]};B=function(){return this.adapter?.isRunning??!1};gt=function(){return s(this,h)?.isUploading??!1};V=function(){return s(this,i,x).length>0};I=function(){return s(this,M)||k(this,M,new Map(this.adapter?.getTools().map(e=>[e.name,e])??[])),s(this,M)};G=async function(){!this.adapter||this.adapter.isConnecting||(await this.adapter.connect(),s(this,T)?.unsubscribe(),k(this,T,new jt),s(this,T).add(this.adapter.onMessageStart(r(this,i,D).bind(this)),this.adapter.onMessageDelta(r(this,i,ft).bind(this)),this.adapter.onMessageEnd(r(this,i,ut).bind(this)),this.adapter.onToolCallStart(r(this,i,pt).bind(this)),this.adapter.onToolCallArgs(r(this,i,mt).bind(this)),this.adapter.onToolCallEnd(r(this,i,bt).bind(this)),this.adapter.onToolCall(r(this,i,vt).bind(this)),this.adapter.onToolCallResult(r(this,i,Ct).bind(this)),this.adapter.onRunAborted(r(this,i,wt).bind(this)),this.adapter.onError(r(this,i,_t).bind(this)),this.adapter.onStateChange(r(this,i,xt).bind(this))),k(this,M,void 0),s(this,l)?.updateConfig({tools:s(this,i,I)}),r(this,i,g).call(this,{type:"forge-ai-chatbot-connected"}))};D=function(e){const t={id:e.messageId,role:"assistant",content:"",timestamp:Date.now(),status:"streaming"};s(this,l).addMessage(t),r(this,i,y).call(this)};ft=function(e){if(!s(this,l).getMessage(e.messageId)){r(this,i,D).call(this,{messageId:e.messageId});return}s(this,l).appendToMessage(e.messageId,e.delta),s(this,$).scheduleUpdate(),s(this,A).value?.scrollToBottom()};ut=function(e){s(this,l).updateMessageStatus(e.messageId,"complete");const t=s(this,l).getMessage(e.messageId);t&&r(this,i,g).call(this,{type:"forge-ai-chatbot-message-received",detail:{message:t}})};pt=function(e){s(this,l).getMessage(e.messageId)||r(this,i,D).call(this,{messageId:e.messageId});const o={id:e.id,messageId:e.messageId,name:e.name,args:{},argsBuffer:"",status:"parsing",type:s(this,i,I).has(e.name)?"client":"agent"};s(this,l).addToolCall(o),r(this,i,y).call(this)};mt=function(e){s(this,l).updateToolCall(e.id,{argsBuffer:e.argsBuffer,args:e.partialArgs??{}}),s(this,A).value?.scrollToBottom()};bt=function(e){s(this,l).updateToolCall(e.id,{args:e.args,argsBuffer:void 0,status:"executing"})};Z=function({metadata:e}={}){return{metadata:e,success:!0}};vt=async function(e){s(this,l).getMessage(e.messageId)||r(this,i,D).call(this,{messageId:e.messageId});let o=s(this,l).getToolCall(e.id);if(o?s(this,l).updateToolCall(e.id,{args:e.args,status:"executing"}):(o={id:e.id,messageId:e.messageId,name:e.name,args:e.args,status:"executing",type:s(this,i,I).has(e.name)?"client":"agent"},s(this,l).addToolCall(o),r(this,i,y).call(this)),o?.type==="client"){r(this,i,g).call(this,{type:"forge-ai-chatbot-tool-call",detail:{toolCallId:e.id,toolName:e.name,arguments:e.args}});const a=s(this,i,I).get(e.name);a?.handler?await Promise.resolve(r(this,i,yt).call(this,e.id,e.name,a.handler,e.args)):r(this,i,Q).call(this,e.id,r(this,i,Z).call(this))}};yt=async function(e,t,o,a){try{const c=await o({args:a,toolCallId:e,toolName:t,signal:void 0});await r(this,i,Q).call(this,e,r(this,i,Z).call(this,{metadata:c}))}catch(n){s(this,l).updateToolCall(e,{status:"error",result:{error:n.message}})}};_t=function(e){const t={id:R("msg"),role:"assistant",content:e.message,timestamp:Date.now(),status:"error"};s(this,l).addMessage(t),r(this,i,y).call(this),r(this,i,g).call(this,{type:"forge-ai-chatbot-error",detail:{error:e.message}})};wt=function(){const e={id:R("msg"),role:"system",content:"Run cancelled",timestamp:Date.now(),status:"complete"};s(this,l).addMessage(e),r(this,i,y).call(this)};xt=function(e){this.requestUpdate()};Ct=function(e){s(this,l).completeToolCall(e.toolCallId,e.result),s(this,l).addMessage(e.message),r(this,i,y).call(this)};Q=async function(e,t){!s(this,l).getToolCall(e)||!this.adapter||(s(this,l).completeToolCall(e,t),this.adapter.sendToolResult(e,t,this.getMessages()))};X=async function(e){if(!e.content.trim()||!this.adapter||s(this,i,B)){this.adapter||console.warn("No adapter configured.");return}if(!s(this,h).canSend())return;const t=e.attachments??[],o=s(this,h).getCompletedUploads(),a={id:R("msg"),role:"user",content:e.content,timestamp:e.timestamp??Date.now(),status:"pending",attachments:t,uploadedFiles:o};s(this,l).addMessage(a),r(this,i,y).call(this),r(this,i,g).call(this,{type:"forge-ai-chatbot-message-sent",detail:{message:a}}),s(this,h).consumeAttachments();try{this.adapter.sendMessage(this.getMessages()),s(this,l).updateMessageStatus(a.id,"complete")}catch(n){s(this,l).updateMessageStatus(a.id,"error");const c=n instanceof Error?n.message:"Failed to send message";r(this,i,g).call(this,{type:"forge-ai-chatbot-error",detail:{error:c}})}};kt=async function(e){const t=[...s(this,h).pendingAttachments];await r(this,i,X).call(this,{content:e.detail.value,timestamp:e.detail.date.getTime(),attachments:t})};H=function(){this.adapter?.isRunning&&this.adapter.abort(),this.requestUpdate()};$t=function(){r(this,i,H).call(this)};Mt=async function(e){const t=s(this,i,x)[e];if(!(!t||t.type!=="message"))try{await navigator.clipboard.writeText(t.data.content)}catch{}};zt=function(e){if(!this.adapter)return;let t=-1;for(let o=e-1;o>=0;o--){const a=s(this,i,x)[o];if(a.type==="message"&&a.data.role==="user"){t=o;break}}t!==-1&&(s(this,l).removeMessageItem(e),this.adapter.sendMessage(this.getMessages()))};It=function(e){console.warn("thumbs-up",e)};Tt=function(e){console.warn("thumbs-down",e)};j=function(e,t,o){const a=R("file");s(this,h).addAttachment(a,{filename:e.name,size:e.size,mimeType:e.type,timestamp:t,thumbnail:o});const n=r(this,i,St).call(this,a);this.adapter?.emitFileUpload(e,n),r(this,i,g).call(this,{type:"forge-ai-chatbot-file-select",detail:{fileId:a,file:e,filename:e.name,size:e.size,mimeType:e.type,timestamp:t,thumbnail:o,...n}})};At=function(e){const{file:t,timestamp:o,thumbnail:a}=e.detail;r(this,i,j).call(this,t,o,a)};St=function(e){return{updateProgress:t=>{s(this,h).updateProgress(e,t)},markComplete:t=>{s(this,h).markComplete(e,t)},markError:t=>{s(this,h).markError(e,t)},onAbort:t=>{s(this,h).registerOnAbort(e,t)}}};Et=function(e){const t={id:R("msg"),role:"assistant",content:e.detail.message,timestamp:Date.now(),status:"error"};s(this,l).addMessage(t),r(this,i,y).call(this)};Rt=function(e){const{filename:t}=e.detail,o=s(this,h).pendingAttachments.find(n=>n.filename===t);if(o){s(this,h).abort(o.id);return}const a=this.getMessages();for(const n of a)if(n.uploadedFiles){const c=n.uploadedFiles.find(b=>b.fileName===t);if(c){r(this,i,Ut).call(this,c.fileId);return}}};Ut=function(e){if(!this.adapter)return;const t={onSuccess:()=>{s(this,l).removeUploadedFile(e),this.requestUpdate()},onError:o=>{r(this,i,g).call(this,{type:"forge-ai-chatbot-error",detail:{error:o}})}};this.adapter.emitFileRemove(e,t),r(this,i,g).call(this,{type:"forge-ai-chatbot-file-remove",detail:{fileId:e}})};Bt=function(e){this.sendMessage(e.detail.text)};Dt=function(e){const{transcript:t}=e.detail;t&&s(this,E).value&&(s(this,E).value.value=t)};y=async function(){await this.updateComplete,s(this,A).value?.scrollToBottom()};Ft=function(){r(this,i,g).call(this,{type:"forge-ai-chatbot-expand"})};Ot=function(){r(this,i,g).call(this,{type:"forge-ai-chatbot-minimize"})};Ht=function(){r(this,i,g).call(this,{type:"forge-ai-chatbot-clear",cancelable:!0}).defaultPrevented||this.clearMessages()};Wt=function(){r(this,i,g).call(this,{type:"forge-ai-chatbot-info"})};qt=function(){const e=this.getMessages();if(e.length===0)return;const t=e.map(a=>{const n=new Date(a.timestamp).toLocaleString(),c=a.role==="user"?"You":"Assistant";return`[${n}] ${c}:
${a.content}
`}).join(`
`),o=`chat-history-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`;te(t,o,"text/plain")};Nt=function(){const e=s(this,h).allAttachments;return e.length===0?p:d`
      ${e.map(t=>d`
          <forge-ai-attachment
            slot="attachments"
            .filename=${t.filename}
            .size=${t.size}
            .mimeType=${t.mimeType}
            .thumbnail=${t.thumbnail??""}
            ?uploading=${t.uploading}
            .progress=${t.progress}
            removable
            @forge-ai-attachment-remove=${r(this,i,Rt)}>
          </forge-ai-attachment>
        `)}
    `};Pt=function(){const e=s(this,i,gt);return d`
      <forge-ai-prompt
        ${J(s(this,E))}
        slot="prompt"
        .placeholder=${this.placeholder}
        .running=${s(this,i,B)||e}
        ?disabled=${e}
        @forge-ai-prompt-send=${r(this,i,kt)}
        @forge-ai-prompt-stop=${r(this,i,H)}
        @forge-ai-prompt-cancel=${r(this,i,$t)}>
        ${s(this,i,Nt)}
        ${N(this.fileUpload==="on",()=>d`
            <forge-ai-file-picker
              slot="actions"
              variant="icon-button"
              multiple
              ?disabled=${e}
              .selectedFiles=${s(this,h).pendingAttachments.map(t=>t.filename)}
              @forge-ai-file-picker-change=${r(this,i,At)}
              @forge-ai-file-picker-error=${r(this,i,Et)}>
            </forge-ai-file-picker>
          `)}
        ${N(this.voiceInput==="on",()=>d`
            <forge-ai-voice-input slot="actions" @forge-ai-voice-input-result=${r(this,i,Dt)}>
            </forge-ai-voice-input>
          `)}
      </forge-ai-prompt>
    `};Lt=function(){if(!s(this,i,B))return p;const e=s(this,i,x)[s(this,i,x).length-1];return e?.type==="message"&&e.data.role==="assistant"&&e.data.content.trim().length>0?p:d`<div class="thinking-indicator">
      <forge-ai-thinking-indicator class="status-indicator"></forge-ai-thinking-indicator>
    </div>`};Vt=function(e){const t=s(this,i,I).get(e.name);return d`<forge-ai-chatbot-tool-call
      .toolCall=${e}
      .toolDefinition=${t}></forge-ai-chatbot-tool-call>`};Gt=function(){return s(this,i,x).length?p:d`
      <forge-ai-empty-state>
        <slot name="empty-state-heading" slot="heading">
          <span>How can I help you today?</span>
        </slot>
        <forge-ai-suggestions
          slot="actions"
          variant="block"
          .suggestions=${this.suggestions??[]}
          @forge-ai-suggestions-select=${r(this,i,Bt)}></forge-ai-suggestions>
      </forge-ai-empty-state>
    `};Jt=function(){return s(this,i,x).filter(e=>e.type==="message"?e.data.role!=="tool":!0).map((e,t)=>{if(e.type==="toolCall")return r(this,i,Vt).call(this,e.data);const o=e.data;if(o.role==="user"){const a=s(this,$).getCachedHtml(o.id,o.content);return d`<forge-ai-user-message>${W(a)}</forge-ai-user-message>`}else{if(o.role==="system")return d`<div class="system-message">${o.content}</div>`;if(o.status==="error"){const a=s(this,$).getCachedHtml(o.id,o.content);return d`
            <forge-ai-error-message>
              <span slot="title">Error</span>
              ${W(a)}
            </forge-ai-error-message>
          `}else return N(o.content?.trim().length>0,()=>{const a=s(this,$).getCachedHtml(o.id,o.content);return d`
              <forge-ai-response-message
                ?complete=${o.status==="complete"}
                ?enable-reactions=${this.enableReactions}
                @forge-ai-response-message-copy=${()=>r(this,i,Mt).call(this,t)}
                @forge-ai-response-message-refresh=${()=>r(this,i,zt).call(this,t)}
                @forge-ai-response-message-thumbs-up=${()=>r(this,i,It).call(this,o.id)}
                @forge-ai-response-message-thumbs-down=${()=>r(this,i,Tt).call(this,o.id)}>
                ${W(a)}
              </forge-ai-response-message>
            `})}})};g=function(e){const t=new CustomEvent(e.type,{detail:e.detail,bubbles:!0,composed:!0,cancelable:e.cancelable??!1});return this.dispatchEvent(t),t};f.styles=ot(de);m([u({attribute:!1})],f.prototype,"adapter",2);m([u({attribute:"file-upload"})],f.prototype,"fileUpload",2);m([u({attribute:"voice-input"})],f.prototype,"voiceInput",2);m([u()],f.prototype,"placeholder",2);m([u({attribute:!1})],f.prototype,"suggestions",2);m([u({type:Boolean,attribute:"show-expand-button"})],f.prototype,"showExpandButton",2);m([u({type:Boolean,attribute:"show-minimize-button"})],f.prototype,"showMinimizeButton",2);m([u({type:Boolean})],f.prototype,"expanded",2);m([u({attribute:"minimize-icon"})],f.prototype,"minimizeIcon",2);m([u({type:Boolean,attribute:"enable-reactions"})],f.prototype,"enableReactions",2);m([u({type:Object,attribute:!1})],f.prototype,"agentInfo",2);m([u({attribute:"title-text"})],f.prototype,"titleText",2);f=m([it(fe)],f);
