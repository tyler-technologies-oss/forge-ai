import{r as tt,i as et,x as _,E as at}from"./iframe-DYTYHfQu.js";import{t as ot}from"./custom-element-UsVr97OX.js";import{n as h}from"./property-BXCNymd2.js";import{n as B,e as U}from"./ref-DT9-Im1b.js";import{n as K}from"./when-CI7b_ccM.js";import{S as Lt}from"./mock-adapter-BEFlJ0Fr.js";import{g as E,d as jt}from"./utils-Dod8vlOP.js";import"./ai-attachment-JYLQlyKJ.js";import"./ai-chat-header-CokF54by.js";import"./ai-chat-interface-CNkztfAX.js";import"./ai-file-picker-Bz2M7gRh.js";import"./ai-message-thread-DrfRtcBc.js";import"./ai-prompt-IYuZfOjt.js";import"./ai-spinner-CbbCij_-.js";import"./ai-suggestions-DN1gv5ln.js";import"./ai-voice-input-COD57ht4.js";class Yt{constructor(t){this._attachments=new Map,this._abortCallbacks=new Map,this._config=t}get pendingAttachments(){return Array.from(this._attachments.values()).filter(t=>t.status==="pending"||t.status==="uploading").map(t=>t.metadata)}get completedAttachments(){return Array.from(this._attachments.values()).filter(t=>t.status==="complete").map(t=>t.metadata)}get allAttachments(){return Array.from(this._attachments.values()).map(t=>t.metadata)}get isUploading(){return Array.from(this._attachments.values()).some(t=>t.status==="uploading")}updateConfig(t){this._config={...this._config,...t}}addAttachment(t,a){const o={id:t,status:"pending",...a};this._attachments.set(t,{id:t,metadata:o,status:"pending"}),this._config.onStateChange?.()}removeAttachment(t){this._attachments.delete(t),this._abortCallbacks.delete(t),this._config.onStateChange?.()}removeCompletedAttachment(t){this._attachments.get(t)?.status==="complete"&&(this._attachments.delete(t),this._config.onStateChange?.())}updateProgress(t,a){const o=this._attachments.get(t);o&&(o.status="uploading",o.metadata.uploading=!0,o.metadata.progress=a,o.metadata.status="uploading",this._config.onStateChange?.())}markComplete(t,a){const o=this._attachments.get(t);o&&(o.status="complete",o.uploadedFile=a,o.metadata.uploading=!1,o.metadata.progress=100,o.metadata.status="success",o.metadata.fileId=a.fileId,this._config.onStateChange?.())}markError(t,a){const o=this._attachments.get(t);o&&(o.status="error",o.errorMessage=a,o.metadata.uploading=!1,o.metadata.status="error",o.metadata.error=a,console.error(`File upload error for ${o.metadata.filename}: ${a}`),this._config.onError?.(a),this.removeAttachment(t))}registerOnAbort(t,a){this._abortCallbacks.set(t,a)}abort(t){const a=this._abortCallbacks.get(t);a&&a(),this.removeAttachment(t)}canSend(){return!Array.from(this._attachments.values()).some(t=>t.status==="uploading")}getCompletedUploads(){return Array.from(this._attachments.values()).filter(t=>t.status==="complete"&&t.uploadedFile).map(t=>t.uploadedFile)}clear(){this._attachments.clear(),this._abortCallbacks.clear(),this._config.onStateChange?.()}}class Gt{constructor(t,a){this._host=t,this._config=a,this._messageItems=[],this._toolCalls=new Map,t.addController(this)}hostConnected(){}hostDisconnected(){this._messageItems=[],this._toolCalls.clear()}updateConfig(t){this._config={...this._config,...t}}get messageItems(){return this._messageItems}getToolCall(t){return this._toolCalls.get(t)}#t(){this._host.requestUpdate()}addMessageItem(t){this._messageItems=[...this._messageItems,t],this.#t()}addMessage(t,a){this.getMessage(t.id)||(this.addMessageItem({type:"message",data:t}),a&&this.#a(t.id,{type:"message-start",timestamp:Date.now(),data:a,rawEvent:a.rawEvent}))}addToolCall(t,a){this._toolCalls.set(t.id,t),this.addMessageItem({type:"toolCall",data:t}),a&&this.#e(t.id,{type:"tool-call-start",timestamp:Date.now(),data:a,rawEvent:a.rawEvent})}updateToolCall(t,a,o){const i=this._toolCalls.get(t);if(!i)return;const d={...i,...a};if(this._toolCalls.set(t,d),this._messageItems=this._messageItems.map(c=>c.type==="toolCall"&&c.data.id===t?{...c,data:d}:c),o)if(o.eventType==="tool-call-args"){const c=o.event;this.#e(t,{type:"tool-call-args",timestamp:Date.now(),data:c,rawEvent:c.rawEvent})}else{const c=o.event;this.#e(t,{type:"tool-call-end",timestamp:Date.now(),data:c,rawEvent:c.rawEvent})}this.#t()}appendToMessage(t,a,o){this._messageItems=this._messageItems.map(i=>i.type==="message"&&i.data.id===t?{...i,data:{...i.data,content:i.data.content+a}}:i),o&&this.#a(t,{type:"message-delta",timestamp:Date.now(),data:o,rawEvent:o.rawEvent}),this.#t()}getMessage(t){const a=this._messageItems.find(o=>o.type==="message"&&o.data.id===t);return a?.type==="message"?a.data:void 0}updateMessageStatus(t,a,o){this._messageItems=this._messageItems.map(i=>i.type==="message"&&i.data.id===t?{...i,data:{...i.data,status:a}}:i),o&&this.#a(t,{type:"message-end",timestamp:Date.now(),data:o,rawEvent:o.rawEvent}),this.#t()}removeMessageItem(t){this._messageItems=this._messageItems.filter((a,o)=>o!==t),this.#t()}clearMessages(){this._messageItems=[],this._toolCalls.clear(),this.#t()}getMessages(){const t=new Map,a=[];for(const o of this._messageItems)if(o.type==="message"){const i={...o.data,toolCalls:[]};t.set(i.id,i),a.push(i.id)}for(const o of this._messageItems)if(o.type==="toolCall"){const i=t.get(o.data.messageId);i&&(i.toolCalls=[...i.toolCalls||[],o.data])}return a.map(o=>t.get(o)).filter(o=>o!==void 0)}setMessages(t){const a=[];this._toolCalls.clear();for(const o of t)if(a.push({type:"message",data:{...o,toolCalls:void 0}}),o.toolCalls)for(const i of o.toolCalls)a.push({type:"toolCall",data:i}),this._toolCalls.set(i.id,i);this._messageItems=a,this.#t()}#a(t,a){this._messageItems.some(i=>i.type==="message"&&i.data.id===t)&&(this._messageItems=this._messageItems.map(i=>{if(i.type==="message"&&i.data.id===t){const d=[...i.data.eventStream||[],a];return{...i,data:{...i.data,eventStream:d}}}return i}),this.#t())}#e(t,a){const o=this._toolCalls.get(t);if(!o)return;const i=[...o.eventStream||[],a],d={...o,eventStream:i};this._toolCalls.set(t,d),this._messageItems=this._messageItems.map(c=>c.type==="toolCall"&&c.data.id===t?{...c,data:d}:c),this.#t()}completeToolCall(t,a,o){this.updateToolCall(t,{result:a,status:"complete"}),o&&this.#e(t,{type:"tool-result",timestamp:Date.now(),data:o,rawEvent:o.rawEvent}),this.#o(t)}#o(t){const a=this._toolCalls.get(t);if(!a)return;const o=this._messageItems.findIndex(I=>I.type==="message"&&I.data.id===a.messageId);if(o===-1)return;const i=this._messageItems[o];if(i.type!=="message"||i.data.content.trim())return;const d=this._messageItems.findIndex(I=>I.type==="toolCall"&&I.data.id===t);if(d===-1||d<=o)return;const[c]=this._messageItems.splice(o,1);this._messageItems.splice(d,0,c),this.#t()}}const rt="confirmToolCall",Vt='.forge-button{--_button-primary-color: var(--forge-button-primary-color, var(--forge-theme-primary, #3f51b5));--_button-text-color: var(--forge-button-text-color, var(--_button-primary-color));--_button-disabled-color: var(--forge-button-disabled-color, var(--forge-theme-surface-container, #e0e0e0));--_button-padding: var(--forge-button-padding, var(--forge-spacing-medium, 16px));--_button-display: var(--forge-button-display, inline-grid);--_button-justify: var(--forge-button-justify, center);--_button-shape: var(--forge-button-shape, calc(var(--forge-shape-medium, 4px) * var(--forge-shape-factor, 1)));--_button-height: var(--forge-button-height, 36px);--_button-min-width: var(--forge-button-min-width, 64px);--_button-spacing: var(--forge-button-spacing, var(--forge-spacing-xsmall, 8px));--_button-border-width: var(--forge-button-border-width, medium);--_button-border-style: var(--forge-button-border-style, none);--_button-border-color: var(--forge-button-border-color, currentColor);--_button-shape-start-start-radius: var(--forge-button-shape-start-start-radius, var(--_button-shape));--_button-shape-start-end-radius: var(--forge-button-shape-start-end-radius, var(--_button-shape));--_button-shape-end-start-radius: var(--forge-button-shape-end-start-radius, var(--_button-shape));--_button-shape-end-end-radius: var(--forge-button-shape-end-end-radius, var(--_button-shape));--_button-padding-block: var(--forge-button-padding-block, var(--_button-0));--_button-padding-inline: var(--forge-button-padding-inline, var(--_button-padding));--_button-background: var(--forge-button-background, transparent);--_button-hover-background: var(--forge-button-hover-background, var(--_button-background));--_button-active-background: var(--forge-button-active-background, var(--_button-background));--_button-color: var(--forge-button-color, var(--_button-text-color));--_button-icon-size: var(--forge-button-icon-size, calc(var(--forge-typography-font-size, 1rem) * 1.125));--_button-shadow: var(--forge-button-shadow, none);--_button-hover-shadow: var(--forge-button-hover-shadow, none);--_button-active-shadow: var(--forge-button-active-shadow, none);--_button-cursor: var(--forge-button-cursor, pointer);--_button-transition-duration: var(--forge-button-transition-duration, var(--forge-animation-duration-short3, .15s));--_button-transition-timing: var(--forge-button-transition-timing, var(--forge-animation-easing-standard, cubic-bezier(.2, 0, 0, 1)));--_button-text-padding-inline: var(--forge-button-text-padding-inline, var(--forge-spacing-xsmall, 8px));--_button-outlined-background: var(--forge-button-outlined-background, transparent);--_button-outlined-color: var(--forge-button-outlined-color, var(--_button-primary-color));--_button-outlined-border-width: var(--forge-button-outlined-border-width, var(--forge-border-thin, 1px));--_button-outlined-border-style: var(--forge-button-outlined-border-style, solid);--_button-outlined-border-color: var(--forge-button-outlined-border-color, var(--_button-primary-color));--_button-tonal-background: var(--forge-button-tonal-background, var(--forge-theme-primary-container, #d1d5ed));--_button-tonal-disabled-background: var(--forge-button-tonal-disabled-background, var(--_button-disabled-color));--_button-tonal-color: var(--forge-button-tonal-color, var(--forge-theme-on-primary-container, #222c62));--_button-tonal-disabled-color: var(--forge-button-tonal-disabled-color, var(--_button-disabled-text-color));--_button-filled-background: var(--forge-button-filled-background, var(--_button-primary-color));--_button-filled-disabled-background: var(--forge-button-filled-disabled-background, var(--_button-disabled-color));--_button-filled-color: var(--forge-button-filled-color, var(--forge-theme-on-primary, #ffffff));--_button-filled-disabled-color: var(--forge-button-filled-disabled-color, var(--_button-disabled-text-color));--_button-raised-background: var(--forge-button-raised-background, var(--_button-primary-color));--_button-raised-disabled-background: var(--forge-button-raised-disabled-background, var(--_button-disabled-color));--_button-raised-color: var(--forge-button-raised-color, var(--forge-theme-on-primary, #ffffff));--_button-raised-disabled-color: var(--forge-button-raised-disabled-color, var(--_button-disabled-text-color));--_button-raised-shadow: var(--forge-button-raised-shadow, 0px 3px 1px -2px rgba(0, 0, 0, .2), 0px 2px 2px 0px rgba(0, 0, 0, .14), 0px 1px 5px 0px rgba(0, 0, 0, .12));--_button-raised-hover-shadow: var(--forge-button-raised-hover-shadow, 0px 2px 4px -1px rgba(0, 0, 0, .2), 0px 4px 5px 0px rgba(0, 0, 0, .14), 0px 1px 10px 0px rgba(0, 0, 0, .12));--_button-raised-active-shadow: var(--forge-button-raised-active-shadow, 0px 5px 5px -3px rgba(0, 0, 0, .2), 0px 8px 10px 1px rgba(0, 0, 0, .14), 0px 3px 14px 2px rgba(0, 0, 0, .12));--_button-raised-disabled-shadow: var(--forge-button-raised-disabled-shadow, none);--_button-link-color: var(--forge-button-link-color, var(--_button-primary-color));--_button-link-text-decoration: var(--forge-button-link-text-decoration, underline);--_button-link-height: var(--forge-button-link-height, auto);--_button-link-padding: var(--forge-button-link-padding, 0);--_button-link-line-height: var(--forge-button-link-line-height, normal);--_button-link-width: var(--forge-button-link-width, auto);--_button-link-hover-text-decoration: var(--forge-button-link-hover-text-decoration, none);--_button-link-active-opacity: var(--forge-button-link-active-opacity, .65);--_button-link-transition-duration: var(--forge-button-link-transition-duration, var(--forge-animation-duration-short3, .15s));--_button-link-transition-timing: var(--forge-button-link-transition-timing, var(--forge-animation-easing-standard, cubic-bezier(.2, 0, 0, 1)));--_button-disabled-cursor: var(--forge-button-disabled-cursor, not-allowed);--_button-disabled-text-color: var(--forge-button-disabled-text-color, var(--forge-theme-text-low, rgba(0, 0, 0, .38)));--_button-disabled-background: var(--forge-button-disabled-background, transparent);--_button-disabled-border-color: var(--forge-button-disabled-border-color, var(--_button-disabled-color));--_button-disabled-shadow: var(--forge-button-disabled-shadow, none);--_button-dense-height: var(--forge-button-dense-height, 24px);--_button-pill-shape: var(--forge-button-pill-shape, calc(var(--forge-shape-full, 9999px) * var(--forge-shape-factor, 1)));--_button-pill-padding-inline: var(--forge-button-pill-padding-inline, var(--forge-spacing-small, 12px));--_button-focus-indicator-offset: var(--forge-button-focus-indicator-offset, 4px);--_button-text-focus-indicator-offset: var(--forge-button-text-focus-indicator-offset, 0px);--_button-link-focus-indicator-offset: var(--forge-button-link-focus-indicator-offset, 2px);--_button-popover-icon-transition-duration: var(--forge-button-popover-icon-transition-duration, var(--forge-animation-duration-short3, .15s));--_button-popover-icon-transition-timing: var(--forge-button-popover-icon-transition-timing, var(--forge-animation-easing-standard, cubic-bezier(.2, 0, 0, 1)));--_button-popover-icon-open-rotation: var(--forge-button-popover-icon-open-rotation, 180deg)}.forge-button{-webkit-tap-highlight-color:transparent;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--forge-typography-button-font-family, var(--forge-typography-font-family, "Roboto", sans-serif));font-size:var(--forge-typography-button-font-size, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-button-font-size-scale, .875)));font-weight:var(--forge-typography-button-font-weight, 500);line-height:var(--forge-typography-button-line-height, normal);letter-spacing:var(--forge-typography-button-letter-spacing, .0714285714em);text-transform:var(--forge-typography-button-text-transform, inherit);text-decoration:var(--forge-typography-button-text-decoration, inherit);position:relative;display:var(--_button-display);grid-auto-flow:column;align-items:center;justify-content:var(--_button-justify);gap:var(--_button-spacing);z-index:0;box-sizing:border-box;min-inline-size:var(--_button-min-width);height:var(--_button-height);inline-size:100%;border-width:var(--_button-border-width);border-style:var(--_button-border-style);border-color:var(--_button-border-color);border-start-start-radius:var(--_button-shape-start-start-radius);border-start-end-radius:var(--_button-shape-start-end-radius);border-end-start-radius:var(--_button-shape-end-start-radius);border-end-end-radius:var(--_button-shape-end-end-radius);padding-block:var(--_button-padding-block);padding-inline:var(--_button-padding-inline);box-shadow:var(--_button-shadow);outline:none;-webkit-user-select:none;user-select:none;-webkit-appearance:none;vertical-align:middle;text-decoration:none;white-space:nowrap;background:var(--_button-background);color:var(--_button-color);cursor:var(--_button-cursor);transition-property:box-shadow,background;transition-duration:var(--_button-transition-duration);transition-timing-function:var(--_button-transition-timing)}.forge-button::-moz-focus-inner{padding:0;border:0}.forge-button:hover{--_button-shadow: var(--_button-hover-shadow);background:var(--_button-hover-background)}.forge-button:active{--_button-shadow: var(--_button-active-shadow);background:var(--_button-active-background)}.forge-button{position:relative;inline-size:auto}.forge-button:not(:disabled):not(.forge-button--link){--_state-layer-display: var(--forge-state-layer-display, flex);--_state-layer-color: var(--forge-state-layer-color, var(--forge-theme-on-surface, #000000));--_state-layer-hover-color: var(--forge-state-layer-hover-color, var(--_state-layer-color));--_state-layer-hover-opacity: var(--forge-state-layer-hover-opacity, .08);--_state-layer-pressed-color: var(--forge-state-layer-pressed-color, var(--_state-layer-color));--_state-layer-pressed-opacity: var(--forge-state-layer-pressed-opacity, .12);--_state-layer-hover-duration: var(--forge-state-layer-hover-duration, 15ms);--_state-layer-pressed-duration: var(--forge-state-layer-pressed-duration, 105ms);--_state-layer-animation-duration: var(--forge-state-layer-animation-duration, 375ms)}.forge-button:not(:disabled):not(.forge-button--link):before{position:absolute;backface-visibility:hidden;transform:translateZ(0);background-color:var(--_state-layer-hover-color);inset:0;transition:opacity var(--_state-layer-hover-duration) linear,background-color var(--_state-layer-hover-duration) linear;--_state-layer-hover-duration: var(--forge-state-layer-hover-duration, .1s);content:"";opacity:0;border-radius:inherit}.forge-button:not(:disabled):not(.forge-button--link):hover:before{background-color:var(--_state-layer-hover-color);opacity:var(--_state-layer-hover-opacity)}.forge-button:not(:disabled):not(.forge-button--link):active:before{opacity:var(--_state-layer-pressed-opacity);transition-duration:var(--_state-layer-pressed-duration);--_state-layer-pressed-opacity: var(--forge-state-layer-pressed-opacity, .18)}@keyframes forge-focus-indicator-outward-grow{0%{outline-width:0}to{outline-width:var(--_focus-indicator-active-width)}}@keyframes forge-focus-indicator-outward-shrink{0%{outline-width:var(--_focus-indicator-active-width)}}@keyframes forge-focus-indicator-inward-grow{0%{border-width:0}to{border-width:var(--_focus-indicator-active-width)}}@keyframes forge-focus-indicator-inward-shrink{0%{border-width:var(--_focus-indicator-active-width)}}.forge-button:not(:disabled){outline:none}.forge-button:not(:disabled):focus-visible:after{--_focus-indicator-display: var(--forge-focus-indicator-display, flex);--_focus-indicator-width: var(--forge-focus-indicator-width, var(--forge-border-medium, 2px));--_focus-indicator-active-width: var(--forge-focus-indicator-active-width, 6px);--_focus-indicator-color: var(--forge-focus-indicator-color, var(--forge-theme-primary, #3f51b5));--_focus-indicator-shape: var(--forge-focus-indicator-shape, calc(var(--forge-shape-extra-small, 1px) * var(--forge-shape-factor, 1)));--_focus-indicator-duration: var(--forge-focus-indicator-duration, var(--forge-animation-duration-long4, .6s));--_focus-indicator-easing: var(--forge-focus-indicator-easing, var(--forge-animation-easing-emphasized, cubic-bezier(.2, 0, 0, 1)));--_focus-indicator-shape-start-start: var(--forge-focus-indicator-shape-start-start, var(--_focus-indicator-shape));--_focus-indicator-shape-start-end: var(--forge-focus-indicator-shape-start-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-end: var(--forge-focus-indicator-shape-end-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-start: var(--forge-focus-indicator-shape-end-start, var(--_focus-indicator-shape));--_focus-indicator-outward-offset: var(--forge-focus-indicator-outward-offset, var(--forge-spacing-xxsmall, 4px));--_focus-indicator-inward-offset: var(--forge-focus-indicator-inward-offset, 0px);--_focus-indicator-offset-block: var(--forge-focus-indicator-offset-block, 0);--_focus-indicator-offset-inline: var(--forge-focus-indicator-offset-inline, 0)}.forge-button:not(:disabled):focus-visible:after{animation-delay:0s,calc(var(--_focus-indicator-duration) * .25);animation-duration:calc(var(--_focus-indicator-duration) * .25),calc(var(--_focus-indicator-duration) * .75);animation-timing-function:var(--_focus-indicator-easing);box-sizing:border-box;color:var(--_focus-indicator-color);display:none;pointer-events:none;position:absolute;margin-block:var(--_focus-indicator-offset-block);margin-inline:var(--_focus-indicator-offset-inline);animation-name:forge-focus-indicator-outward-grow,forge-focus-indicator-outward-shrink;border-end-end-radius:calc(var(--_focus-indicator-shape-end-end) + var(--_focus-indicator-outward-offset));border-end-start-radius:calc(var(--_focus-indicator-shape-end-start) + var(--_focus-indicator-outward-offset));border-start-end-radius:calc(var(--_focus-indicator-shape-start-end) + var(--_focus-indicator-outward-offset));border-start-start-radius:calc(var(--_focus-indicator-shape-start-start) + var(--_focus-indicator-outward-offset));inset:calc(-1 * var(--_focus-indicator-outward-offset));outline:var(--_focus-indicator-width) solid currentColor;content:"";display:block}.forge-button:not(:disabled){--forge-focus-indicator-color: var(--_button-primary-color)}.forge-button:disabled{cursor:var(--_button-disabled-cursor);--_button-background: var(--_button-disabled-background);--_button-color: var(--_button-disabled-text-color);--_button-shadow: var(--_button-disabled-shadow);pointer-events:none;pointer-events:initial}.forge-button:where(:not(.forge-button--outlined,.forge-button--tonal,.forge-button--filled,.forge-button--raised,.forge-button--link)),.forge-button--text{--_button-padding-inline: var(--_button-text-padding-inline)}.forge-button--outlined{--_button-background: var(--_button-outlined-background);--_button-color: var(--_button-outlined-color);--_button-border-width: var(--_button-outlined-border-width);--_button-border-style: var(--_button-outlined-border-style);--_button-border-color: var(--_button-outlined-border-color)}.forge-button--outlined:disabled{--_button-border-color: var(--_button-disabled-border-color)}.forge-button--tonal{--_button-background: var(--_button-tonal-background);--_button-color: var(--_button-tonal-color)}.forge-button--tonal:disabled{--_button-background: var(--_button-tonal-disabled-background);--_button-color: var(--_button-tonal-disabled-color)}.forge-button--filled,.forge-button--raised{--_button-background: var(--_button-filled-background);--_button-color: var(--_button-filled-color);--forge-state-layer-color: var(--_button-filled-color)}.forge-button--filled:disabled,.forge-button--raised:disabled{--_button-background: var(--_button-filled-disabled-background);--_button-color: var(--_button-filled-disabled-color)}.forge-button--raised{--_button-background: var(--_button-raised-background);--_button-color: var(--_button-raised-color);--_button-shadow: var(--_button-raised-shadow)}.forge-button--raised:hover{--_button-shadow: var(--_button-raised-hover-shadow)}.forge-button--raised:active{--_button-shadow: var(--_button-raised-active-shadow)}.forge-button--raised:disabled{--_button-background: var(--_button-raised-disabled-background);--_button-color: var(--_button-raised-disabled-color);--_button-shadow: var(--_button-raised-disabled-shadow)}.forge-button--link{--_button-color: var(--_button-link-color);--_button-height: var(--_button-link-height);--_button-padding: var(--_button-link-padding);--_button-focus-indicator-offset: var(--_button-link-focus-indicator-offset);text-decoration:var(--_button-link-text-decoration);line-height:var(--_button-link-line-height);transition:opacity var(--_button-link-transition-duration) var(--_button-link-transition-timing);inline-size:var(--_button-link-width)}.forge-button--link:hover{text-decoration:var(--_button-link-hover-text-decoration)}.forge-button--link:active{opacity:var(--_button-link-active-opacity)}.forge-button--pill{--_button-shape: var(--_button-pill-shape);--_button-padding-inline: var(--_button-pill-padding-inline);--forge-focus-indicator-shape: var(--_button-pill-shape)}.forge-button{--forge-icon-font-size: var(--_button-icon-size)}.forge-button--dense{--_button-height: var(--_button-dense-height)}:host{display:contents}.container{position:absolute;inset:auto var(--forge-spacing-medium, 16px) var(--forge-spacing-medium, 16px);z-index:10;display:flex;align-items:center;justify-content:space-between;gap:var(--forge-spacing-medium, 16px);padding:var(--forge-spacing-medium, 16px);background-color:var(--forge-theme-surface, #ffffff);border:1px solid var(--forge-theme-outline, #e0e0e0);border-radius:var(--forge-spacing-medium, 16px);box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;animation:slide-up-fade-in .3s cubic-bezier(0,0,0,1)}.text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--forge-typography-body1-font-family, var(--forge-typography-font-family, "Roboto", sans-serif));font-size:var(--forge-typography-body1-font-size, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-body-font-size-scale, .875)));font-weight:var(--forge-typography-body1-font-weight, 400);line-height:var(--forge-typography-body1-line-height, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-body-line-height-scale, 1.125)));letter-spacing:var(--forge-typography-body1-letter-spacing, .0357142857em);text-transform:var(--forge-typography-body1-text-transform, inherit);text-decoration:var(--forge-typography-body1-text-decoration, inherit);flex:1;color:var(--forge-theme-on-surface, #000000)}.actions{display:flex;gap:var(--forge-spacing-small, 12px)}@keyframes slide-up-fade-in{0%{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}';var Zt=Object.defineProperty,Jt=Object.getOwnPropertyDescriptor,st=e=>{throw TypeError(e)},A=(e,t,a,o)=>{for(var i=o>1?void 0:o?Jt(t,a):t,d=e.length-1,c;d>=0;d--)(c=e[d])&&(i=(o?c(t,a,i):c(i))||i);return o&&i&&Zt(t,a,i),i},Kt=(e,t,a)=>t.has(e)||st("Cannot "+a),Qt=(e,t,a)=>t.has(e)?st("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),Q=(e,t,a)=>(Kt(e,t,"access private method"),a),R,it,nt;const Xt="forge-ai-confirmation-prompt";let w=class extends et{constructor(){super(...arguments),Qt(this,R),this.text="",this.confirmText="Confirm",this.denyText="Deny",this.disabled=!1}render(){return _`
      <div class="container" role="alertdialog" aria-labelledby="confirmation-text" aria-modal="false">
        <div id="confirmation-text" class="text">${this.text}</div>
        <div class="actions">
          <button
            class="deny-button forge-button forge-button--outlined"
            ?disabled=${this.disabled}
            aria-label="Deny"
            @click=${Q(this,R,nt)}>
            ${this.denyText}
          </button>
          <button
            class="confirm-button forge-button forge-button--raised"
            ?disabled=${this.disabled}
            aria-label="Confirm"
            @click=${Q(this,R,it)}>
            ${this.confirmText}
          </button>
        </div>
      </div>
    `}};R=new WeakSet;it=function(){const e=new CustomEvent("forge-ai-confirmation-prompt-confirm",{bubbles:!0,composed:!0});this.dispatchEvent(e)};nt=function(){const e=new CustomEvent("forge-ai-confirmation-prompt-deny",{bubbles:!0,composed:!0});this.dispatchEvent(e)};w.styles=tt(Vt);A([h()],w.prototype,"text",2);A([h({attribute:"confirm-text"})],w.prototype,"confirmText",2);A([h({attribute:"deny-text"})],w.prototype,"denyText",2);A([h({type:Boolean})],w.prototype,"disabled",2);w=A([ot(Xt)],w);const te=':host{display:block;width:100%;height:100%}forge-ai-chat-interface::part(messages){overflow:hidden}forge-ai-chat-interface forge-ai-message-thread{min-height:0}.session-files{display:flex;flex-direction:column;gap:var(--forge-spacing-xsmall, 8px);min-width:0}.session-files .session-files-header{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--forge-typography-label1-font-family, var(--forge-typography-font-family, "Roboto", sans-serif));font-size:var(--forge-typography-label1-font-size, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-label-font-size-scale, .75)));font-weight:var(--forge-typography-label1-font-weight, 400);line-height:var(--forge-typography-label1-line-height, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-label-line-height-scale, 1.25)));letter-spacing:var(--forge-typography-label1-letter-spacing, .0357142857em);text-transform:var(--forge-typography-label1-text-transform, inherit);text-decoration:var(--forge-typography-label1-text-decoration, inherit);color:var(--forge-theme-text-medium, rgba(0, 0, 0, .6))}.session-files .session-files-list::-webkit-scrollbar{height:var(--forge-scrollbar-height, 16px);width:var(--forge-scrollbar-width, 16px)}.session-files .session-files-list::-webkit-scrollbar-track{background-color:var(--forge-scrollbar-track-container, var(--forge-theme-surface-container-low, #ebebeb))}.session-files .session-files-list::-webkit-scrollbar-track:hover{background-color:var(--forge-scrollbar-track-container-hover, var(--forge-theme-surface-container-low, #ebebeb))}.session-files .session-files-list::-webkit-scrollbar-corner{background-color:var(--forge-scrollbar-track-container, var(--forge-theme-surface-container-low, #ebebeb))}.session-files .session-files-list::-webkit-scrollbar-thumb{height:var(--forge-scrollbar-thumb-min-height, 32px);width:var(--forge-scrollbar-thumb-min-width, 32px);border-radius:var(--forge-scrollbar-border-radius, calc(var(--forge-shape-full, 9999px) * var(--forge-shape-factor, 1)));border-width:var(--forge-scrollbar-border-width, 3px);border-style:solid;border-color:transparent;background-color:var(--forge-scrollbar-thumb-container, var(--forge-theme-surface-container-medium, #c2c2c2));background-clip:content-box}.session-files .session-files-list::-webkit-scrollbar-thumb:hover{background-color:var(--forge-scrollbar-thumb-container-hover, var(--forge-theme-surface-container-high, #9e9e9e))}.session-files .session-files-list{display:flex;gap:var(--forge-spacing-small, 12px);overflow-x:auto;padding-block-end:var(--forge-spacing-xsmall, 8px)}';var ee=Object.defineProperty,ae=Object.getOwnPropertyDescriptor,lt=e=>{throw TypeError(e)},f=(e,t,a,o)=>{for(var i=o>1?void 0:o?ae(t,a):t,d=e.length-1,c;d>=0;d--)(c=e[d])&&(i=(o?c(t,a,i):c(i))||i);return o&&i&&ee(t,a,i),i},N=(e,t,a)=>t.has(e)||lt("Cannot "+a),r=(e,t,a)=>(N(e,t,"read from private field"),a?a.call(e):t.get(e)),m=(e,t,a)=>t.has(e)?lt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),v=(e,t,a,o)=>(N(e,t,"write to private field"),t.set(e,a),a),n=(e,t,a)=>(N(e,t,"access private method"),a),X=(e,t,a,o)=>({set _(i){v(e,t,i)},get _(){return r(e,t,o)}}),W,$,x,F,l,u,y,C,T,p,s,dt,z,S,ct,ut,ht,P,k,q,D,gt,ft,pt,bt,mt,H,vt,L,_t,yt,wt,xt,M,j,kt,O,Ct,Mt,It,$t,Tt,zt,Et,Y,At,St,Dt,Ut,Rt,Bt,Ft,Pt,G,V,Z,Ot,J,Wt,qt,Nt,Ht,b;const oe="forge-ai-chatbot";let g=class extends et{constructor(){super(...arguments),m(this,s),this.fileUpload="off",this.voiceInput="on",this.placeholder="Ask a question...",this.showExpandButton=!1,this.showMinimizeButton=!1,this.expanded=!1,this.minimizeIcon="default",this.enableReactions=!1,this.titleText="AI Assistant",this.headingLevel=2,this.debugMode=!1,m(this,W,U()),m(this,$,U()),m(this,x,U()),m(this,F,U()),m(this,l),m(this,u),m(this,y),m(this,C),m(this,T,0),m(this,p)}connectedCallback(){super.connectedCallback(),v(this,l,new Gt(this,{tools:r(this,s,k)})),v(this,u,new Yt({onError:e=>{n(this,s,b).call(this,{type:"forge-ai-chatbot-error",detail:{error:e}})},onStateChange:()=>{this.requestUpdate()}})),this.adapter&&n(this,s,q).call(this)}disconnectedCallback(){super.disconnectedCallback(),r(this,C)?.unsubscribe(),this.adapter?.disconnect()}willUpdate(e){e.has("adapter")&&this.adapter&&(v(this,y,void 0),n(this,s,q).call(this))}clearMessages(){r(this,l).clearMessages(),r(this,u).clear()}getMessages(){return r(this,l).getMessages()}setMessages(e){r(this,l).setMessages(e)}async sendMessage(e,t){if(!this.adapter){console.warn("No adapter configured.");return}if(r(this,x).value?.closeSlashMenu(),t){const a=Date.now();for(const o of t)n(this,s,Y).call(this,o,a)}await n(this,s,j).call(this,{content:e,attachments:r(this,u).pendingAttachments})}abort(){n(this,s,O).call(this)}async scrollToBottom({behavior:e}={}){await r(this,$).value?.updateComplete,await new Promise(requestAnimationFrame),r(this,$).value?.scrollToBottom({behavior:e})}getThreadState(){return{threadId:this.adapter?.threadId,messages:this.getMessages(),timestamp:Date.now()}}setThreadState(e){this.setMessages(e.messages),e.threadId&&this.adapter&&(this.adapter.threadId=e.threadId)}render(){return _`
      <forge-ai-chat-interface
        ${B(r(this,W))}
        role="region"
        aria-label="AI chatbot"
        aria-live="polite"
        aria-busy=${r(this,s,S)}>
        <forge-ai-chat-header
          ${B(r(this,F))}
          slot="header"
          ?show-expand-button=${this.showExpandButton}
          ?show-minimize-button=${this.showMinimizeButton}
          ?expanded=${this.expanded}
          export-option=${r(this,s,P)?"enabled":"off"}
          clear-option=${r(this,s,P)?"enabled":"off"}
          .minimizeIcon=${this.minimizeIcon}
          .agentInfo=${this.agentInfo}
          .headingLevel=${this.headingLevel}
          .titleText=${this.titleText}
          @forge-ai-chat-header-expand=${n(this,s,Ft)}
          @forge-ai-chat-header-minimize=${n(this,s,Pt)}
          @forge-ai-chat-header-clear=${n(this,s,G)}
          @forge-ai-chat-header-export=${n(this,s,J)}
          @forge-ai-chat-header-info=${n(this,s,V)}>
        </forge-ai-chat-header>
        ${r(this,s,Wt)} ${r(this,s,Ht)} ${r(this,s,qt)} ${r(this,s,Nt)}
      </forge-ai-chat-interface>
    `}};W=new WeakMap;$=new WeakMap;x=new WeakMap;F=new WeakMap;l=new WeakMap;u=new WeakMap;y=new WeakMap;C=new WeakMap;T=new WeakMap;p=new WeakMap;s=new WeakSet;dt=function(){const e=[];return r(this,s,P)&&(e.push({id:"clear",name:"Clear",group:"Conversation"}),e.push({id:"export",name:"Export",group:"Conversation"})),e.push({id:"info",name:"Info",group:"Help"}),e.push({id:"debug",name:`${this.debugMode?"Disable debug mode":"Enable debug mode"}`,group:"Help"}),e};z=function(){return r(this,l)?.messageItems??[]};S=function(){return(this.adapter?.isRunning??!1)||r(this,T)>0};ct=function(){return r(this,p)!==void 0};ut=function(){return r(this,s,z).filter(e=>!(e.type==="toolCall"&&e.data.name===rt))};ht=function(){return r(this,u)?.isUploading??!1};P=function(){return r(this,s,z).length>0};k=function(){return r(this,y)||v(this,y,new Map(this.adapter?.getTools().map(e=>[e.name,e])??[])),r(this,y)};q=async function(){!this.adapter||this.adapter.isConnecting||(await this.adapter.connect(),r(this,C)?.unsubscribe(),v(this,C,new Lt),r(this,C).add(this.adapter.onMessageStart(n(this,s,D).bind(this)),this.adapter.onMessageDelta(n(this,s,gt).bind(this)),this.adapter.onMessageEnd(n(this,s,ft).bind(this)),this.adapter.onToolCallStart(n(this,s,pt).bind(this)),this.adapter.onToolCallArgs(n(this,s,bt).bind(this)),this.adapter.onToolCallEnd(n(this,s,mt).bind(this)),this.adapter.onToolCall(n(this,s,vt).bind(this)),this.adapter.onToolCallResult(n(this,s,xt).bind(this)),this.adapter.onRunAborted(n(this,s,yt).bind(this)),this.adapter.onError(n(this,s,_t).bind(this)),this.adapter.onStateChange(n(this,s,wt).bind(this))),v(this,y,void 0),r(this,l)?.updateConfig({tools:r(this,s,k)}),n(this,s,b).call(this,{type:"forge-ai-chatbot-connected"}))};D=function(e){const t={id:e.messageId,role:"assistant",content:"",timestamp:Date.now(),status:"streaming"};r(this,l).addMessage(t,e)};gt=function(e){if(!r(this,l).getMessage(e.messageId)){n(this,s,D).call(this,{messageId:e.messageId});return}r(this,l).appendToMessage(e.messageId,e.delta,e),this.scrollToBottom()};ft=function(e){r(this,l).updateMessageStatus(e.messageId,"complete",e);const t=r(this,l).getMessage(e.messageId);t&&n(this,s,b).call(this,{type:"forge-ai-chatbot-message-received",detail:{message:t}})};pt=function(e){r(this,l).getMessage(e.messageId)||n(this,s,D).call(this,{messageId:e.messageId});const a={id:e.id,messageId:e.messageId,name:e.name,args:{},argsBuffer:"",status:"parsing",type:r(this,s,k).has(e.name)?"client":"agent"};r(this,l).addToolCall(a,e)};bt=function(e){const t={argsBuffer:e.argsBuffer,args:e.partialArgs??{}},a={eventType:"tool-call-args",event:e};r(this,l).updateToolCall(e.id,t,a),this.scrollToBottom()};mt=function(e){const t={args:e.args,argsBuffer:void 0,status:"executing"},a={eventType:"tool-call-end",event:e};r(this,l).updateToolCall(e.id,t,a)};H=function(e,t){return typeof t=="string"||t&&typeof t=="object"?t:`Tool '${e}' executed successfully`};vt=async function(e){r(this,l).getMessage(e.messageId)||n(this,s,D).call(this,{messageId:e.messageId});let a=r(this,l).getToolCall(e.id);if(a?r(this,l).updateToolCall(e.id,{args:e.args,status:"executing"}):(a={id:e.id,messageId:e.messageId,name:e.name,args:e.args,status:"executing",type:r(this,s,k).has(e.name)?"client":"agent"},r(this,l).addToolCall(a)),e.name===rt){const o=e.args;v(this,p,{type:"llm-driven",toolCallId:e.id,displayText:o.action??""}),this.requestUpdate();return}if(a?.type==="client"){n(this,s,b).call(this,{type:"forge-ai-chatbot-tool-call",detail:{toolCallId:e.id,toolName:e.name,arguments:e.args}});const o=r(this,s,k).get(e.name);if(o?.handler){const i=!!o.renderer;o.skipConfirmation||i?await Promise.resolve(n(this,s,L).call(this,e.id,e.name,o.handler,e.args)):(v(this,p,{type:"auto-intercept",toolCallId:e.id,displayText:o.displayName??e.name,toolName:e.name,args:e.args,handler:o.handler}),this.requestUpdate())}else n(this,s,M).call(this,e.id,n(this,s,H).call(this,e.name))}};L=async function(e,t,a,o){X(this,T)._++,this.requestUpdate();try{const d=await a({args:o,toolCallId:e,toolName:t,signal:void 0});await n(this,s,M).call(this,e,n(this,s,H).call(this,t,d))}catch(i){r(this,l).updateToolCall(e,{status:"error",result:{error:i.message}})}finally{X(this,T)._--,this.requestUpdate()}};_t=function(e){const t={id:E(),role:"assistant",content:e.message,timestamp:Date.now(),status:"error"};r(this,l).addMessage(t),n(this,s,b).call(this,{type:"forge-ai-chatbot-error",detail:{error:e.message}})};yt=function(){const e={id:E(),role:"system",content:"Run cancelled",timestamp:Date.now(),status:"complete"};r(this,l).addMessage(e)};wt=function(e){this.requestUpdate()};xt=function(e){r(this,l).completeToolCall(e.toolCallId,e.result,e),r(this,l).addMessage(e.message)};M=async function(e,t){!r(this,l).getToolCall(e)||!this.adapter||(r(this,l).completeToolCall(e,t),this.adapter.sendToolResult(e,t,this.getMessages()))};j=async function(e){if(!e.content.trim()||!this.adapter||r(this,s,S)){this.adapter||console.warn("No adapter configured.");return}if(!r(this,u).canSend())return;const t={id:E(),role:"user",content:e.content,timestamp:e.timestamp??Date.now(),status:"pending"};r(this,l).addMessage(t),n(this,s,b).call(this,{type:"forge-ai-chatbot-message-sent",detail:{message:t}});try{this.adapter.sendMessage(this.getMessages()),r(this,l).updateMessageStatus(t.id,"complete")}catch(a){r(this,l).updateMessageStatus(t.id,"error");const o=a instanceof Error?a.message:"Failed to send message";n(this,s,b).call(this,{type:"forge-ai-chatbot-error",detail:{error:o}})}};kt=async function(e){const t=[...r(this,u).pendingAttachments];await n(this,s,j).call(this,{content:e.detail.value,timestamp:e.detail.date.getTime(),attachments:t})};O=function(){this.adapter?.isRunning&&this.adapter.abort(),this.requestUpdate()};Ct=function(){n(this,s,O).call(this)};Mt=function(){if(!r(this,p))return;const{type:e,toolCallId:t,displayText:a,toolName:o,args:i,handler:d}=r(this,p);if(v(this,p,void 0),e==="llm-driven"){const c={status:"confirmed",action:a};n(this,s,M).call(this,t,c)}else e==="auto-intercept"&&d&&o&&i&&n(this,s,L).call(this,t,o,d,i);this.requestUpdate()};It=function(){if(!r(this,p))return;const{type:e,toolCallId:t,displayText:a,toolName:o}=r(this,p);if(v(this,p,void 0),e==="llm-driven"){const i={status:"denied",action:a};n(this,s,M).call(this,t,i)}else if(e==="auto-intercept"){const i={denied:!0,toolName:o??"unknown",message:"User denied this action"};n(this,s,M).call(this,t,i)}this.requestUpdate()};$t=async function(e){const t=r(this,l).getMessage(e.detail.messageId);if(t)try{await navigator.clipboard.writeText(t.content)}catch{}};Tt=function(e){if(!this.adapter)return;const t=e.detail.messageId,a=r(this,s,z).findIndex(i=>i.type==="message"&&i.data.id===t);if(a===-1)return;let o=-1;for(let i=a-1;i>=0;i--){const d=r(this,s,z)[i];if(d.type==="message"&&d.data.role==="user"){o=i;break}}o!==-1&&(r(this,l).removeMessageItem(a),this.adapter.sendMessage(this.getMessages()))};zt=function(e){console.warn("thumbs-up",e.detail.messageId)};Et=function(e){console.warn("thumbs-down",e.detail.messageId)};Y=function(e,t){const a=E();r(this,u).addAttachment(a,{filename:e.name,size:e.size,mimeType:e.type,timestamp:t});const o=n(this,s,St).call(this,a);this.adapter?.emitFileUpload(e,o),n(this,s,b).call(this,{type:"forge-ai-chatbot-file-select",detail:{fileId:a,file:e,filename:e.name,size:e.size,mimeType:e.type,timestamp:t,...o}})};At=function(e){const{file:t,timestamp:a}=e.detail;n(this,s,Y).call(this,t,a)};St=function(e){return{updateProgress:t=>{r(this,u).updateProgress(e,t)},markComplete:t=>{r(this,u).markComplete(e,t)},markError:t=>{r(this,u).markError(e,t)},onAbort:t=>{r(this,u).registerOnAbort(e,t)}}};Dt=function(e){const t={id:E(),role:"assistant",content:e.detail.message,timestamp:Date.now(),status:"error"};r(this,l).addMessage(t)};Ut=function(e){const{filename:t}=e.detail,a=r(this,u).pendingAttachments.find(i=>i.filename===t);if(a){r(this,u).abort(a.id);return}const o=r(this,u).completedAttachments.find(i=>i.filename===t);o&&o.fileId&&(r(this,u).removeCompletedAttachment(o.id),this.requestUpdate(),this.adapter?.emitFileRemove(o.fileId,{onSuccess:()=>{},onError:i=>{console.error(`Failed to remove file ${t}:`,i)}}))};Rt=async function(e){await this.sendMessage(e.detail.text),r(this,x).value?.focus()};Bt=function(e){const{transcript:t}=e.detail;t&&r(this,x).value&&(r(this,x).value.value=t)};Ft=function(){n(this,s,b).call(this,{type:"forge-ai-chatbot-expand"})};Pt=function(){n(this,s,b).call(this,{type:"forge-ai-chatbot-minimize"})};G=function(){n(this,s,b).call(this,{type:"forge-ai-chatbot-clear",cancelable:!0}).defaultPrevented||this.clearMessages()};V=function(){const e=r(this,F).value;e?.showAgentInfo&&e.showAgentInfo(),n(this,s,b).call(this,{type:"forge-ai-chatbot-info"})};Z=function(){this.debugMode=!this.debugMode};Ot=function(e){switch(e.detail.commandId){case"clear":n(this,s,G).call(this);break;case"export":n(this,s,J).call(this);break;case"info":n(this,s,V).call(this);break;case"debug":n(this,s,Z).call(this);break}};J=function(){const e=this.getMessages();if(e.length===0)return;const t=e.map(o=>{const i=new Date(o.timestamp).toLocaleString(),d=o.role==="user"?"You":"Assistant";return`[${i}] ${d}:
${o.content}
`}).join(`
`),a=`chat-history-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.txt`;jt(t,a,"text/plain")};Wt=function(){const e=r(this,u).completedAttachments,a=[...r(this,u).pendingAttachments,...e];return a.length===0?at:_`
      <div class="session-files" slot="attachments">
        <div class="session-files-header">Session Files (${a.length})</div>
        <div class="session-files-list">
          ${a.map(o=>_`
              <forge-ai-attachment
                .filename=${o.filename}
                .size=${o.size}
                ?uploading=${o.uploading??!1}
                removable
                @forge-ai-attachment-remove=${n(this,s,Ut)}>
              </forge-ai-attachment>
            `)}
        </div>
      </div>
    `};qt=function(){return r(this,p)?_`
      <forge-ai-confirmation-prompt
        slot="confirmation"
        .text=${r(this,p).displayText}
        @forge-ai-confirmation-prompt-confirm=${n(this,s,Mt)}
        @forge-ai-confirmation-prompt-deny=${n(this,s,It)}>
      </forge-ai-confirmation-prompt>
    `:at};Nt=function(){const e=r(this,s,ht),t=e||r(this,s,ct);return _`
      <forge-ai-prompt
        ${B(r(this,x))}
        slot="prompt"
        .placeholder=${this.placeholder}
        .running=${r(this,s,S)||e}
        .slashCommands=${r(this,s,dt)}
        ?disabled=${t}
        ?debug-mode=${this.debugMode}
        @forge-ai-prompt-send=${n(this,s,kt)}
        @forge-ai-prompt-stop=${n(this,s,O)}
        @forge-ai-prompt-cancel=${n(this,s,Ct)}
        @forge-ai-prompt-debug-toggle=${n(this,s,Z)}
        @forge-ai-prompt-command=${n(this,s,Ot)}>
        ${K(this.fileUpload==="on",()=>_`
            <forge-ai-file-picker
              slot="actions"
              variant="icon-button"
              multiple
              ?disabled=${e}
              .selectedFiles=${r(this,u).pendingAttachments.map(a=>a.filename)}
              @forge-ai-file-picker-change=${n(this,s,At)}
              @forge-ai-file-picker-error=${n(this,s,Dt)}>
            </forge-ai-file-picker>
          `)}
        ${K(this.voiceInput==="on",()=>_`
            <forge-ai-voice-input slot="actions" @forge-ai-voice-input-result=${n(this,s,Bt)}>
            </forge-ai-voice-input>
          `)}
      </forge-ai-prompt>
    `};Ht=function(){return _`
      <forge-ai-message-thread
        ${B(r(this,$))}
        .messageItems=${r(this,s,ut)}
        .tools=${r(this,s,k)}
        ?enable-reactions=${this.enableReactions}
        ?show-thinking=${r(this,s,S)}
        ?debug-mode=${this.debugMode}
        @forge-ai-message-thread-copy=${n(this,s,$t)}
        @forge-ai-message-thread-refresh=${n(this,s,Tt)}
        @forge-ai-message-thread-thumbs-up=${n(this,s,zt)}
        @forge-ai-message-thread-thumbs-down=${n(this,s,Et)}>
        <slot name="empty-state-heading" slot="empty-state-heading"></slot>
        <slot name="empty-state-message" slot="empty-state-message"></slot>
        <forge-ai-suggestions
          slot="empty-state-actions"
          variant="block"
          .suggestions=${this.suggestions??[]}
          @forge-ai-suggestions-select=${n(this,s,Rt)}>
        </forge-ai-suggestions>
      </forge-ai-message-thread>
    `};b=function(e){const t=new CustomEvent(e.type,{detail:e.detail,bubbles:!0,composed:!0,cancelable:e.cancelable??!1});return this.dispatchEvent(t),t};g.styles=tt(te);f([h({attribute:!1})],g.prototype,"adapter",2);f([h({attribute:"file-upload"})],g.prototype,"fileUpload",2);f([h({attribute:"voice-input"})],g.prototype,"voiceInput",2);f([h()],g.prototype,"placeholder",2);f([h({attribute:!1})],g.prototype,"suggestions",2);f([h({type:Boolean,attribute:"show-expand-button"})],g.prototype,"showExpandButton",2);f([h({type:Boolean,attribute:"show-minimize-button"})],g.prototype,"showMinimizeButton",2);f([h({type:Boolean})],g.prototype,"expanded",2);f([h({attribute:"minimize-icon"})],g.prototype,"minimizeIcon",2);f([h({type:Boolean,attribute:"enable-reactions"})],g.prototype,"enableReactions",2);f([h({type:Object,attribute:!1})],g.prototype,"agentInfo",2);f([h({attribute:"title-text"})],g.prototype,"titleText",2);f([h({attribute:"heading-level",type:Number})],g.prototype,"headingLevel",2);f([h({type:Boolean,attribute:"debug-mode"})],g.prototype,"debugMode",2);g=f([ot(oe)],g);
