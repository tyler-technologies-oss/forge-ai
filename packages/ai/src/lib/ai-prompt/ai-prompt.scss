@use '@tylertech/forge/sass/core/styles/spacing' as forge-spacing;
@use '@tylertech/forge/sass/core/styles/theme' as forge-theme;
@use '@tylertech/forge/dist/card/forge-card';
@use '@tylertech/forge/dist/field/forge-field';
@use '@tylertech/forge/dist/divider/forge-divider';
@use '@tylertech/forge/dist/icon-button/forge-icon-button';
@use '@tylertech/forge/sass/core/styles/scrollbar' as forge-scrollbar;

:host {
  display: block;
}

.input-container {
  .forge-card {
    --forge-card-padding: 0;
  }

  .forge-field {
    --forge-theme-outline-low: transparent;
    --forge-field-height: auto;

    min-height: 52px;
    align-items: center;

    &:has(textarea) *:not(textarea) {
      margin-block-start: initial;
    }
  }

  textarea {
    field-sizing: content;
    resize: none;
    max-height: 150px; // Limit to ~6 rows
    overflow-y: auto;
    outline: none;
    padding: #{forge-spacing.variable(medium)} 0;

    @include forge-scrollbar.base;
  }

  .debug-button {
    color: #{forge-theme.variable(on-error-container-low)};
    --forge-icon-button-focus-indicator-color: #{forge-theme.variable(error)};
    --forge-icon-button-tonal-background-color: #{forge-theme.variable(error-container-low)};
  }
}

.actions {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  padding: #{forge-spacing.variable(xxsmall)};
  height: 52px;
  overflow-x: auto;
}

:host(:state(stacked)) {
  .vertical-divider {
    display: none;
  }
}

:host(:state(inline)) {
  .forge-field {
    --forge-field-height: 52px;
    --forge-field-padding-inline: 0;
    gap: #{forge-spacing.variable(xxsmall)};
  }

  .actions {
    overflow-x: visible;
    padding: #{forge-spacing.variable(xxsmall)};
    --forge-icon-button-size: 32px;
  }

  .vertical-divider {
    width: 1px;
    height: 32px;
    background-color: #{forge-theme.variable(outline)};
    margin-inline-end: #{forge-spacing.variable(xsmall)};
  }

  .forge-divider {
    display: none;
  }
}
